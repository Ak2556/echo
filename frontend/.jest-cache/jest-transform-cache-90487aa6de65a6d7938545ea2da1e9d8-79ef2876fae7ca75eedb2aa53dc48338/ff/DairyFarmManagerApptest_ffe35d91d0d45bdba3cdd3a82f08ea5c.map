{"version":3,"sources":["C:\\Users\\A.P\\OneDrive\\Desktop\\echo-main\\frontend\\src\\components\\miniapps\\__tests__\\DairyFarmManagerApp.test.tsx"],"sourcesContent":["import React from 'react';\r\nimport { render, screen, fireEvent } from '@testing-library/react';\r\nimport '@testing-library/jest-dom';\r\nimport DairyFarmManagerApp from '../DairyFarmManagerApp';\r\n\r\ndescribe('DairyFarmManagerApp - Records flows', () => {\r\n  test('opens view modal when clicking View Details', async () => {\r\n    render(<DairyFarmManagerApp isVisible={true} onClose={() => {}} />);\r\n\r\n    // Click the Records tab to render the records list\r\n    const recordsTabs = screen.getAllByText(/Records/i);\r\n    const recordsTab = recordsTabs.find((el) => (el.textContent || '').trim().startsWith('ðŸ“‹') && !(el.textContent || '').includes('View')) || recordsTabs[0];\r\n    fireEvent.click(recordsTab);\r\n\r\n    // Confirm at least one record (by tag) is visible\r\n    const tagText = await screen.findByText(/001-GIR-2022/i);\r\n    expect(tagText).toBeInTheDocument();\r\n  });\r\n\r\n  test('deletes a record when confirmed', async () => {\r\n    render(<DairyFarmManagerApp isVisible={true} onClose={() => {}} />);\r\n\r\n    // Click the Records tab to render the records list\r\n    const recordsTabs = screen.getAllByText(/Records/i);\r\n    const recordsTab = recordsTabs.find((el) => (el.textContent || '').trim().startsWith('ðŸ“‹') && !(el.textContent || '').includes('View')) || recordsTabs[0];\r\n    fireEvent.click(recordsTab);\r\n\r\n    // Find all delete buttons\r\n    const deleteButtons = await screen.findAllByText(/Delete/i);\r\n    expect(deleteButtons.length).toBeGreaterThan(0);\r\n\r\n    // Mock confirm to return true\r\n    const originalConfirm = window.confirm;\r\n    window.confirm = jest.fn(() => true) as any;\r\n\r\n    // Capture a tag value present before deletion\r\n    const tagText = await screen.findByText(/001-GIR-2022/i);\r\n    expect(tagText).toBeInTheDocument();\r\n\r\n    fireEvent.click(deleteButtons[0]);\r\n\r\n    // After deletion, the specific tag may no longer be in the document\r\n    expect(screen.queryByText(/001-GIR-2022/i)).not.toBeInTheDocument();\r\n\r\n    // restore\r\n    window.confirm = originalConfirm;\r\n  });\r\n});\r\n"],"names":["describe","test","render","DairyFarmManagerApp","isVisible","onClose","recordsTabs","screen","getAllByText","recordsTab","find","el","textContent","trim","startsWith","includes","fireEvent","click","tagText","findByText","expect","toBeInTheDocument","deleteButtons","findAllByText","length","toBeGreaterThan","originalConfirm","window","confirm","jest","fn","queryByText","not"],"mappings":";;;;;8DAAkB;wBACwB;QACnC;4EACyB;;;;;;AAEhCA,SAAS,uCAAuC;IAC9CC,KAAK,+CAA+C;QAClDC,IAAAA,cAAM,gBAAC,qBAACC,4BAAmB;YAACC,WAAW;YAAMC,SAAS,KAAO;;QAE7D,mDAAmD;QACnD,MAAMC,cAAcC,cAAM,CAACC,YAAY,CAAC;QACxC,MAAMC,aAAaH,YAAYI,IAAI,CAAC,CAACC,KAAO,AAACA,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGC,IAAI,GAAGC,UAAU,CAAC,SAAS,CAAC,AAACH,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGG,QAAQ,CAAC,YAAYT,WAAW,CAAC,EAAE;QACzJU,iBAAS,CAACC,KAAK,CAACR;QAEhB,kDAAkD;QAClD,MAAMS,UAAU,MAAMX,cAAM,CAACY,UAAU,CAAC;QACxCC,OAAOF,SAASG,iBAAiB;IACnC;IAEApB,KAAK,mCAAmC;QACtCC,IAAAA,cAAM,gBAAC,qBAACC,4BAAmB;YAACC,WAAW;YAAMC,SAAS,KAAO;;QAE7D,mDAAmD;QACnD,MAAMC,cAAcC,cAAM,CAACC,YAAY,CAAC;QACxC,MAAMC,aAAaH,YAAYI,IAAI,CAAC,CAACC,KAAO,AAACA,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGC,IAAI,GAAGC,UAAU,CAAC,SAAS,CAAC,AAACH,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGG,QAAQ,CAAC,YAAYT,WAAW,CAAC,EAAE;QACzJU,iBAAS,CAACC,KAAK,CAACR;QAEhB,0BAA0B;QAC1B,MAAMa,gBAAgB,MAAMf,cAAM,CAACgB,aAAa,CAAC;QACjDH,OAAOE,cAAcE,MAAM,EAAEC,eAAe,CAAC;QAE7C,8BAA8B;QAC9B,MAAMC,kBAAkBC,OAAOC,OAAO;QACtCD,OAAOC,OAAO,GAAGC,KAAKC,EAAE,CAAC,IAAM;QAE/B,8CAA8C;QAC9C,MAAMZ,UAAU,MAAMX,cAAM,CAACY,UAAU,CAAC;QACxCC,OAAOF,SAASG,iBAAiB;QAEjCL,iBAAS,CAACC,KAAK,CAACK,aAAa,CAAC,EAAE;QAEhC,oEAAoE;QACpEF,OAAOb,cAAM,CAACwB,WAAW,CAAC,kBAAkBC,GAAG,CAACX,iBAAiB;QAEjE,UAAU;QACVM,OAAOC,OAAO,GAAGF;IACnB;AACF"}