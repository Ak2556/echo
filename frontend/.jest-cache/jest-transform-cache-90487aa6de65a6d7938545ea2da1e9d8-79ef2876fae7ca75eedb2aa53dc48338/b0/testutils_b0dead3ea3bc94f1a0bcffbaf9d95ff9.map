{"version":3,"sources":["C:\\Users\\A.P\\OneDrive\\Desktop\\echo-main\\frontend\\src\\__tests__\\setup\\test-utils.tsx"],"sourcesContent":["/**\r\n * Enhanced Test Utilities\r\n * Comprehensive testing utilities for React components, hooks, and integration tests\r\n */\r\n\r\nimport React, { ReactElement, ReactNode } from 'react';\r\nimport { render, RenderOptions, RenderResult } from '@testing-library/react';\r\nimport {\r\n  renderHook,\r\n  RenderHookOptions,\r\n  RenderHookResult,\r\n} from '@testing-library/react';\r\nimport userEvent from '@testing-library/user-event';\r\n\r\n// Mock data generators\r\nexport const mockUser = (overrides = {}) => ({\r\n  id: 'user-123',\r\n  username: 'testuser',\r\n  displayName: 'Test User',\r\n  avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=test',\r\n  verified: false,\r\n  followers: 100,\r\n  following: 50,\r\n  isOnline: true,\r\n  bio: 'Test user bio',\r\n  location: 'Test City',\r\n  ...overrides,\r\n});\r\n\r\nexport const mockPost = (overrides = {}) => ({\r\n  id: 'post-123',\r\n  author: mockUser(),\r\n  content: 'Test post content',\r\n  type: 'text' as const,\r\n  timestamp: new Date('2024-01-01T12:00:00Z'),\r\n  likes: 10,\r\n  comments: 5,\r\n  shares: 2,\r\n  bookmarks: 1,\r\n  isLiked: false,\r\n  isBookmarked: false,\r\n  hashtags: ['#test'],\r\n  mentions: [],\r\n  ...overrides,\r\n});\r\n\r\nexport const mockMessage = (overrides = {}) => ({\r\n  id: 'message-123',\r\n  sender: mockUser(),\r\n  recipient: mockUser({ id: 'user-456' }),\r\n  content: 'Test message',\r\n  type: 'text' as const,\r\n  timestamp: new Date('2024-01-01T12:00:00Z'),\r\n  isRead: false,\r\n  isDelivered: true,\r\n  reactions: [],\r\n  isEdited: false,\r\n  isDeleted: false,\r\n  ...overrides,\r\n});\r\n\r\nexport const mockChat = (overrides = {}) => ({\r\n  id: 'chat-123',\r\n  participants: [mockUser()],\r\n  lastMessage: mockMessage(),\r\n  unreadCount: 1,\r\n  isGroup: false,\r\n  isPinned: false,\r\n  isMuted: false,\r\n  isArchived: false,\r\n  ...overrides,\r\n});\r\n\r\n// Theme mock data\r\nexport const mockTheme = {\r\n  colorMode: 'light' as const,\r\n  colorPalette: 'mono',\r\n  accentColor: '#007aff',\r\n  actualColorMode: 'light' as const,\r\n  setColorMode: jest.fn(),\r\n  setColorPalette: jest.fn(),\r\n  setAccentColor: jest.fn(),\r\n  toggleColorMode: jest.fn(),\r\n};\r\n\r\n// Language mock data\r\nexport const mockLanguage = {\r\n  language: 'en',\r\n  setLanguage: jest.fn(),\r\n  t: jest.fn((key: string) => key),\r\n  isRTL: false,\r\n};\r\n\r\n// Settings mock data\r\nexport const mockSettings = {\r\n  notifications: true,\r\n  autoSave: true,\r\n  theme: 'auto',\r\n  language: 'en',\r\n  accessibility: {\r\n    reducedMotion: false,\r\n    highContrast: false,\r\n    fontSize: 'medium',\r\n  },\r\n  updateSettings: jest.fn(),\r\n  resetSettings: jest.fn(),\r\n};\r\n\r\n// Simple wrapper for testing (contexts are mocked in jest.setup.js)\r\nconst TestWrapper = ({ children }: { children: ReactNode }) => {\r\n  return <div data-testid=\"test-wrapper\">{children}</div>;\r\n};\r\n\r\n// Custom render function with minimal wrapper\r\ninterface CustomRenderOptions extends Omit<RenderOptions, 'wrapper'> {\r\n  // Add any simple options here if needed\r\n}\r\n\r\nexport const customRender = (\r\n  ui: ReactElement,\r\n  options: CustomRenderOptions = {}\r\n): RenderResult => {\r\n  return render(ui, {\r\n    wrapper: TestWrapper,\r\n    ...options,\r\n  });\r\n};\r\n\r\n// Custom hook render function\r\nexport const customRenderHook = <TProps, TResult>(\r\n  hook: (props: TProps) => TResult,\r\n  options: RenderHookOptions<TProps> & CustomRenderOptions = {}\r\n): RenderHookResult<TResult, TProps> => {\r\n  return renderHook(hook, {\r\n    wrapper: TestWrapper,\r\n    ...options,\r\n  });\r\n};\r\n\r\n// User event setup\r\nexport const setupUserEvent = () => userEvent.setup();\r\n\r\n// Async utilities\r\nexport const waitForLoadingToFinish = () =>\r\n  new Promise((resolve) => setTimeout(resolve, 0));\r\n\r\nexport const waitForAnimation = () =>\r\n  new Promise((resolve) => setTimeout(resolve, 300));\r\n\r\n// Mock API responses\r\nexport const mockApiResponse = (data: any, status = 200) => ({\r\n  ok: status >= 200 && status < 300,\r\n  status,\r\n  json: () => Promise.resolve(data),\r\n  text: () => Promise.resolve(JSON.stringify(data)),\r\n});\r\n\r\nexport const mockApiError = (message = 'API Error', status = 500) => ({\r\n  ok: false,\r\n  status,\r\n  json: () => Promise.reject(new Error(message)),\r\n  text: () => Promise.reject(new Error(message)),\r\n});\r\n\r\n// Local storage mock utilities\r\nexport const mockLocalStorage = () => {\r\n  const store: Record<string, string> = {};\r\n\r\n  return {\r\n    getItem: jest.fn((key: string) => store[key] || null),\r\n    setItem: jest.fn((key: string, value: string) => {\r\n      store[key] = value;\r\n    }),\r\n    removeItem: jest.fn((key: string) => {\r\n      delete store[key];\r\n    }),\r\n    clear: jest.fn(() => {\r\n      Object.keys(store).forEach((key) => delete store[key]);\r\n    }),\r\n    get store() {\r\n      return { ...store };\r\n    },\r\n  };\r\n};\r\n\r\n// Intersection Observer mock\r\nexport const mockIntersectionObserver = () => {\r\n  const mockObserver = {\r\n    observe: jest.fn(),\r\n    unobserve: jest.fn(),\r\n    disconnect: jest.fn(),\r\n  };\r\n\r\n  global.IntersectionObserver = jest\r\n    .fn()\r\n    .mockImplementation(() => mockObserver);\r\n\r\n  return mockObserver;\r\n};\r\n\r\n// Resize Observer mock\r\nexport const mockResizeObserver = () => {\r\n  const mockObserver = {\r\n    observe: jest.fn(),\r\n    unobserve: jest.fn(),\r\n    disconnect: jest.fn(),\r\n  };\r\n\r\n  global.ResizeObserver = jest.fn().mockImplementation(() => mockObserver);\r\n\r\n  return mockObserver;\r\n};\r\n\r\n// Media query mock\r\nexport const mockMediaQuery = (matches = false) => {\r\n  const mockMQL = {\r\n    matches,\r\n    media: '',\r\n    onchange: null,\r\n    addListener: jest.fn(),\r\n    removeListener: jest.fn(),\r\n    addEventListener: jest.fn(),\r\n    removeEventListener: jest.fn(),\r\n    dispatchEvent: jest.fn(),\r\n  };\r\n\r\n  Object.defineProperty(window, 'matchMedia', {\r\n    writable: true,\r\n    value: jest.fn().mockImplementation(() => mockMQL),\r\n  });\r\n\r\n  return mockMQL;\r\n};\r\n\r\n// Performance testing utilities\r\nexport const measurePerformance = async (fn: () => Promise<void> | void) => {\r\n  const start = performance.now();\r\n  await fn();\r\n  const end = performance.now();\r\n  return end - start;\r\n};\r\n\r\nexport const measureMemory = () => {\r\n  if ('memory' in performance) {\r\n    return (performance as any).memory;\r\n  }\r\n  return null;\r\n};\r\n\r\n// Accessibility testing utilities\r\nexport const checkAccessibility = async (container: HTMLElement) => {\r\n  // Mock implementation - in real scenario would use @axe-core/react\r\n  const issues: string[] = [];\r\n\r\n  // Check for missing alt text\r\n  const images = container.querySelectorAll('img');\r\n  images.forEach((img) => {\r\n    if (!img.alt && !img.getAttribute('aria-label')) {\r\n      issues.push('Image missing alt text');\r\n    }\r\n  });\r\n\r\n  // Check for missing labels\r\n  const inputs = container.querySelectorAll('input, textarea, select');\r\n  inputs.forEach((input) => {\r\n    const hasLabel =\r\n      input.getAttribute('aria-label') ||\r\n      input.getAttribute('aria-labelledby') ||\r\n      container.querySelector(`label[for=\"${input.id}\"]`);\r\n    if (!hasLabel) {\r\n      issues.push('Form control missing label');\r\n    }\r\n  });\r\n\r\n  // Check for proper heading hierarchy\r\n  const headings = container.querySelectorAll('h1, h2, h3, h4, h5, h6');\r\n  let lastLevel = 0;\r\n  headings.forEach((heading) => {\r\n    const level = parseInt(heading.tagName.charAt(1));\r\n    if (level > lastLevel + 1) {\r\n      issues.push('Heading hierarchy skipped');\r\n    }\r\n    lastLevel = level;\r\n  });\r\n\r\n  return issues;\r\n};\r\n\r\n// Custom matchers\r\nexport const customMatchers = {\r\n  toBeAccessible: async (received: HTMLElement) => {\r\n    const issues = await checkAccessibility(received);\r\n    const pass = issues.length === 0;\r\n\r\n    return {\r\n      message: () =>\r\n        pass\r\n          ? `Expected element to have accessibility issues`\r\n          : `Expected element to be accessible, but found issues: ${issues.join(', ')}`,\r\n      pass,\r\n    };\r\n  },\r\n\r\n  toHavePerformanceWithin: (received: number, min: number, max: number) => {\r\n    const pass = received >= min && received <= max;\r\n\r\n    return {\r\n      message: () =>\r\n        pass\r\n          ? `Expected ${received}ms not to be within ${min}ms - ${max}ms`\r\n          : `Expected ${received}ms to be within ${min}ms - ${max}ms`,\r\n      pass,\r\n    };\r\n  },\r\n\r\n  toBeResponsive: (received: HTMLElement) => {\r\n    const computedStyle = window.getComputedStyle(received);\r\n    const hasFlexOrGrid =\r\n      computedStyle.display === 'flex' ||\r\n      computedStyle.display === 'grid' ||\r\n      computedStyle.display === 'inline-flex' ||\r\n      computedStyle.display === 'inline-grid';\r\n\r\n    const hasResponsiveUnits =\r\n      computedStyle.width?.includes('%') ||\r\n      computedStyle.width?.includes('vw') ||\r\n      computedStyle.width?.includes('rem') ||\r\n      computedStyle.maxWidth?.includes('%');\r\n\r\n    const pass = hasFlexOrGrid || hasResponsiveUnits;\r\n\r\n    return {\r\n      message: () =>\r\n        pass\r\n          ? `Expected element not to be responsive`\r\n          : `Expected element to be responsive (use flex/grid or responsive units)`,\r\n      pass,\r\n    };\r\n  },\r\n};\r\n\r\n// Test data factories\r\nexport const createTestData = {\r\n  users: (count = 5) =>\r\n    Array.from({ length: count }, (_, i) =>\r\n      mockUser({ id: `user-${i}`, username: `user${i}` })\r\n    ),\r\n\r\n  posts: (count = 10) =>\r\n    Array.from({ length: count }, (_, i) =>\r\n      mockPost({ id: `post-${i}`, content: `Test post ${i}` })\r\n    ),\r\n\r\n  messages: (count = 20) =>\r\n    Array.from({ length: count }, (_, i) =>\r\n      mockMessage({ id: `message-${i}`, content: `Test message ${i}` })\r\n    ),\r\n\r\n  chats: (count = 5) =>\r\n    Array.from({ length: count }, (_, i) => mockChat({ id: `chat-${i}` })),\r\n};\r\n\r\n// Export everything for easy importing\r\nexport * from '@testing-library/react';\r\nexport * from '@testing-library/user-event';\r\nexport { customRender as render, customRenderHook as renderHook };\r\n"],"names":["checkAccessibility","createTestData","customMatchers","customRender","customRenderHook","measureMemory","measurePerformance","mockApiError","mockApiResponse","mockChat","mockIntersectionObserver","mockLanguage","mockLocalStorage","mockMediaQuery","mockMessage","mockPost","mockResizeObserver","mockSettings","mockTheme","mockUser","render","renderHook","setupUserEvent","waitForAnimation","waitForLoadingToFinish","overrides","id","username","displayName","avatar","verified","followers","following","isOnline","bio","location","author","content","type","timestamp","Date","likes","comments","shares","bookmarks","isLiked","isBookmarked","hashtags","mentions","sender","recipient","isRead","isDelivered","reactions","isEdited","isDeleted","participants","lastMessage","unreadCount","isGroup","isPinned","isMuted","isArchived","colorMode","colorPalette","accentColor","actualColorMode","setColorMode","jest","fn","setColorPalette","setAccentColor","toggleColorMode","language","setLanguage","t","key","isRTL","notifications","autoSave","theme","accessibility","reducedMotion","highContrast","fontSize","updateSettings","resetSettings","TestWrapper","children","div","data-testid","ui","options","wrapper","hook","userEvent","setup","Promise","resolve","setTimeout","data","status","ok","json","text","JSON","stringify","message","reject","Error","store","getItem","setItem","value","removeItem","clear","Object","keys","forEach","mockObserver","observe","unobserve","disconnect","global","IntersectionObserver","mockImplementation","ResizeObserver","matches","mockMQL","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","defineProperty","window","writable","start","performance","now","end","memory","container","issues","images","querySelectorAll","img","alt","getAttribute","push","inputs","input","hasLabel","querySelector","headings","lastLevel","heading","level","parseInt","tagName","charAt","toBeAccessible","received","pass","length","join","toHavePerformanceWithin","min","max","toBeResponsive","computedStyle","getComputedStyle","hasFlexOrGrid","display","hasResponsiveUnits","width","includes","maxWidth","users","count","Array","from","_","i","posts","messages","chats"],"mappings":"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"}