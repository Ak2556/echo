{"version":3,"sources":["C:\\Users\\A.P\\OneDrive\\Desktop\\echo-main\\frontend\\src\\components\\miniapps\\__tests__\\DairyFarmManagerApp.test.tsx"],"sourcesContent":["import React from 'react';\r\nimport { render, screen, fireEvent } from '@testing-library/react';\r\nimport '@testing-library/jest-dom';\r\nimport DairyFarmManagerApp from '../DairyFarmManagerApp';\r\n\r\ndescribe('DairyFarmManagerApp - Records flows', () => {\r\n  test('opens view modal when clicking View Details', async () => {\r\n    render(<DairyFarmManagerApp isVisible={true} onClose={() => {}} />);\r\n\r\n    // Click the Records tab to render the records list\r\n    const recordsTabs = screen.getAllByText(/Records/i);\r\n    const recordsTab = recordsTabs.find((el) => (el.textContent || '').trim().startsWith('ðŸ“‹') && !(el.textContent || '').includes('View')) || recordsTabs[0];\r\n    fireEvent.click(recordsTab);\r\n\r\n    // Find the first View Details button and click it\r\n    const viewButtons = await screen.findAllByText(/View Details/i);\r\n    expect(viewButtons.length).toBeGreaterThan(0);\r\n    fireEvent.click(viewButtons[0]);\r\n\r\n    // Expect modal to show Breed label or the breed value (e.g., Gir)\r\n    expect(await screen.findByText(/Breed|Gir/i)).toBeInTheDocument();\r\n  });\r\n\r\n  test('deletes a record when confirmed', async () => {\r\n    render(<DairyFarmManagerApp isVisible={true} onClose={() => {}} />);\r\n\r\n    // Click the Records tab to render the records list\r\n    const recordsTabs = screen.getAllByText(/Records/i);\r\n    const recordsTab = recordsTabs.find((el) => (el.textContent || '').trim().startsWith('ðŸ“‹') && !(el.textContent || '').includes('View')) || recordsTabs[0];\r\n    fireEvent.click(recordsTab);\r\n\r\n    // Find all delete buttons\r\n    const deleteButtons = await screen.findAllByText(/Delete/i);\r\n    expect(deleteButtons.length).toBeGreaterThan(0);\r\n\r\n    // Mock confirm to return true\r\n    const originalConfirm = window.confirm;\r\n    window.confirm = jest.fn(() => true) as any;\r\n\r\n    // Capture a tag value present before deletion\r\n    const tagText = await screen.findByText(/001-GIR-2022/i);\r\n    expect(tagText).toBeInTheDocument();\r\n\r\n    fireEvent.click(deleteButtons[0]);\r\n\r\n    // After deletion, the specific tag may no longer be in the document\r\n    expect(screen.queryByText(/001-GIR-2022/i)).not.toBeInTheDocument();\r\n\r\n    // restore\r\n    window.confirm = originalConfirm;\r\n  });\r\n});\r\n"],"names":["describe","test","render","DairyFarmManagerApp","isVisible","onClose","recordsTabs","screen","getAllByText","recordsTab","find","el","textContent","trim","startsWith","includes","fireEvent","click","viewButtons","findAllByText","expect","length","toBeGreaterThan","findByText","toBeInTheDocument","deleteButtons","originalConfirm","window","confirm","jest","fn","tagText","queryByText","not"],"mappings":";;;;;8DAAkB;wBACwB;QACnC;4EACyB;;;;;;AAEhCA,SAAS,uCAAuC;IAC9CC,KAAK,+CAA+C;QAClDC,IAAAA,cAAM,gBAAC,qBAACC,4BAAmB;YAACC,WAAW;YAAMC,SAAS,KAAO;;QAE7D,mDAAmD;QACnD,MAAMC,cAAcC,cAAM,CAACC,YAAY,CAAC;QACxC,MAAMC,aAAaH,YAAYI,IAAI,CAAC,CAACC,KAAO,AAACA,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGC,IAAI,GAAGC,UAAU,CAAC,SAAS,CAAC,AAACH,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGG,QAAQ,CAAC,YAAYT,WAAW,CAAC,EAAE;QACzJU,iBAAS,CAACC,KAAK,CAACR;QAEhB,kDAAkD;QAClD,MAAMS,cAAc,MAAMX,cAAM,CAACY,aAAa,CAAC;QAC/CC,OAAOF,YAAYG,MAAM,EAAEC,eAAe,CAAC;QAC3CN,iBAAS,CAACC,KAAK,CAACC,WAAW,CAAC,EAAE;QAE9B,kEAAkE;QAClEE,OAAO,MAAMb,cAAM,CAACgB,UAAU,CAAC,eAAeC,iBAAiB;IACjE;IAEAvB,KAAK,mCAAmC;QACtCC,IAAAA,cAAM,gBAAC,qBAACC,4BAAmB;YAACC,WAAW;YAAMC,SAAS,KAAO;;QAE7D,mDAAmD;QACnD,MAAMC,cAAcC,cAAM,CAACC,YAAY,CAAC;QACxC,MAAMC,aAAaH,YAAYI,IAAI,CAAC,CAACC,KAAO,AAACA,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGC,IAAI,GAAGC,UAAU,CAAC,SAAS,CAAC,AAACH,CAAAA,GAAGC,WAAW,IAAI,EAAC,EAAGG,QAAQ,CAAC,YAAYT,WAAW,CAAC,EAAE;QACzJU,iBAAS,CAACC,KAAK,CAACR;QAEhB,0BAA0B;QAC1B,MAAMgB,gBAAgB,MAAMlB,cAAM,CAACY,aAAa,CAAC;QACjDC,OAAOK,cAAcJ,MAAM,EAAEC,eAAe,CAAC;QAE7C,8BAA8B;QAC9B,MAAMI,kBAAkBC,OAAOC,OAAO;QACtCD,OAAOC,OAAO,GAAGC,KAAKC,EAAE,CAAC,IAAM;QAE/B,8CAA8C;QAC9C,MAAMC,UAAU,MAAMxB,cAAM,CAACgB,UAAU,CAAC;QACxCH,OAAOW,SAASP,iBAAiB;QAEjCR,iBAAS,CAACC,KAAK,CAACQ,aAAa,CAAC,EAAE;QAEhC,oEAAoE;QACpEL,OAAOb,cAAM,CAACyB,WAAW,CAAC,kBAAkBC,GAAG,CAACT,iBAAiB;QAEjE,UAAU;QACVG,OAAOC,OAAO,GAAGF;IACnB;AACF"}