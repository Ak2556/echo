{"version":3,"sources":["C:\\Users\\A.P\\OneDrive\\Desktop\\echo-main\\frontend\\src\\utils\\themeUtils.ts"],"sourcesContent":["/**\r\n * Theme Management Utilities\r\n * Enhanced utilities for theme management, accessibility, and user preferences\r\n */\r\n\r\nexport interface ThemePreset {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  colorMode: 'light' | 'dark' | 'auto';\r\n  palette: string;\r\n  accentColor: string;\r\n  preview: {\r\n    background: string;\r\n    foreground: string;\r\n    accent: string;\r\n  };\r\n}\r\n\r\nexport interface AccessibilitySettings {\r\n  reducedMotion: boolean;\r\n  highContrast: boolean;\r\n  forcedColors: boolean;\r\n  fontSize: 'small' | 'medium' | 'large' | 'xl';\r\n  focusIndicators: 'subtle' | 'prominent';\r\n}\r\n\r\nexport interface ThemeScheduleConfig {\r\n  type: 'off' | 'sunset' | 'time' | 'location';\r\n  lightTime?: string;\r\n  darkTime?: string;\r\n  location?: {\r\n    lat: number;\r\n    lng: number;\r\n    name: string;\r\n  };\r\n  enabled: boolean;\r\n}\r\n\r\n/**\r\n * Predefined theme presets\r\n */\r\nexport const THEME_PRESETS: ThemePreset[] = [\r\n  {\r\n    id: 'auto',\r\n    name: 'Auto',\r\n    description: 'Follows your system preference',\r\n    colorMode: 'auto',\r\n    palette: 'mono',\r\n    accentColor: '#007aff',\r\n    preview: {\r\n      background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\r\n      foreground: '#1e293b',\r\n      accent: '#007aff',\r\n    },\r\n  },\r\n  {\r\n    id: 'light',\r\n    name: 'Light',\r\n    description: 'Clean and bright interface',\r\n    colorMode: 'light',\r\n    palette: 'mono',\r\n    accentColor: '#007aff',\r\n    preview: {\r\n      background: '#ffffff',\r\n      foreground: '#1e293b',\r\n      accent: '#007aff',\r\n    },\r\n  },\r\n  {\r\n    id: 'dark',\r\n    name: 'Dark',\r\n    description: 'Easy on the eyes in low light',\r\n    colorMode: 'dark',\r\n    palette: 'dark',\r\n    accentColor: '#60a5fa',\r\n    preview: {\r\n      background: '#0f172a',\r\n      foreground: '#f8fafc',\r\n      accent: '#60a5fa',\r\n    },\r\n  },\r\n  {\r\n    id: 'blue',\r\n    name: 'Ocean Blue',\r\n    description: 'Calming blue tones',\r\n    colorMode: 'light',\r\n    palette: 'blue',\r\n    accentColor: '#3b82f6',\r\n    preview: {\r\n      background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\r\n      foreground: '#1e3a8a',\r\n      accent: '#3b82f6',\r\n    },\r\n  },\r\n  {\r\n    id: 'green',\r\n    name: 'Nature Green',\r\n    description: 'Fresh and natural',\r\n    colorMode: 'light',\r\n    palette: 'green',\r\n    accentColor: '#10b981',\r\n    preview: {\r\n      background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\r\n      foreground: '#064e3b',\r\n      accent: '#10b981',\r\n    },\r\n  },\r\n  {\r\n    id: 'red',\r\n    name: 'Nothing Red',\r\n    description: 'Bold Nothing Phone style',\r\n    colorMode: 'light',\r\n    palette: 'red',\r\n    accentColor: '#ef4444',\r\n    preview: {\r\n      background: 'linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)',\r\n      foreground: '#7f1d1d',\r\n      accent: '#ef4444',\r\n    },\r\n  },\r\n];\r\n\r\n/**\r\n * Accessibility presets\r\n */\r\nexport const ACCESSIBILITY_PRESETS: Record<string, AccessibilitySettings> = {\r\n  default: {\r\n    reducedMotion: false,\r\n    highContrast: false,\r\n    forcedColors: false,\r\n    fontSize: 'medium',\r\n    focusIndicators: 'subtle',\r\n  },\r\n  accessible: {\r\n    reducedMotion: true,\r\n    highContrast: true,\r\n    forcedColors: false,\r\n    fontSize: 'large',\r\n    focusIndicators: 'prominent',\r\n  },\r\n  lowVision: {\r\n    reducedMotion: true,\r\n    highContrast: true,\r\n    forcedColors: true,\r\n    fontSize: 'xl',\r\n    focusIndicators: 'prominent',\r\n  },\r\n};\r\n\r\n/**\r\n * Detects user's system preferences\r\n */\r\nexport function detectSystemPreferences(): {\r\n  colorScheme: 'light' | 'dark';\r\n  reducedMotion: boolean;\r\n  highContrast: boolean;\r\n  forcedColors: boolean;\r\n} {\r\n  if (typeof window === 'undefined') {\r\n    return {\r\n      colorScheme: 'light',\r\n      reducedMotion: false,\r\n      highContrast: false,\r\n      forcedColors: false,\r\n    };\r\n  }\r\n\r\n  return {\r\n    colorScheme: window.matchMedia('(prefers-color-scheme: dark)').matches\r\n      ? 'dark'\r\n      : 'light',\r\n    reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)')\r\n      .matches,\r\n    highContrast: window.matchMedia('(prefers-contrast: high)').matches,\r\n    forcedColors: window.matchMedia('(forced-colors: active)').matches,\r\n  };\r\n}\r\n\r\n/**\r\n * Gets sunrise and sunset times for a location\r\n */\r\nexport async function getSunriseSunset(\r\n  lat: number,\r\n  lng: number,\r\n  date?: Date\r\n): Promise<{ sunrise: Date; sunset: Date } | null> {\r\n  try {\r\n    const targetDate = date || new Date();\r\n    const dateStr = targetDate.toISOString().split('T')[0];\r\n\r\n    const response = await fetch(\r\n      `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lng}&date=${dateStr}&formatted=0`\r\n    );\r\n\r\n    if (!response.ok) throw new Error('Failed to fetch sunrise/sunset data');\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.status !== 'OK')\r\n      throw new Error('Invalid sunrise/sunset response');\r\n\r\n    return {\r\n      sunrise: new Date(data.results.sunrise),\r\n      sunset: new Date(data.results.sunset),\r\n    };\r\n  } catch (error) {\r\n    console.warn('Failed to fetch sunrise/sunset times:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Gets user's current location\r\n */\r\nexport function getCurrentLocation(): Promise<{\r\n  lat: number;\r\n  lng: number;\r\n  name?: string;\r\n}> {\r\n  return new Promise((resolve, reject) => {\r\n    if (!navigator.geolocation) {\r\n      reject(new Error('Geolocation is not supported'));\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        const { latitude: lat, longitude: lng } = position.coords;\r\n\r\n        try {\r\n          // Try to get location name using reverse geocoding\r\n          const response = await fetch(\r\n            `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=en`\r\n          );\r\n\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            const name =\r\n              data.city ||\r\n              data.locality ||\r\n              data.countryName ||\r\n              'Unknown Location';\r\n            resolve({ lat, lng, name });\r\n          } else {\r\n            resolve({ lat, lng });\r\n          }\r\n        } catch (error) {\r\n          resolve({ lat, lng });\r\n        }\r\n      },\r\n      (error) => {\r\n        reject(error);\r\n      },\r\n      {\r\n        enableHighAccuracy: false,\r\n        timeout: 10000,\r\n        maximumAge: 300000, // 5 minutes\r\n      }\r\n    );\r\n  });\r\n}\r\n\r\n/**\r\n * Calculates if it should be dark mode based on schedule\r\n */\r\nexport function shouldUseDarkModeBySchedule(\r\n  schedule: ThemeScheduleConfig,\r\n  currentTime: Date = new Date()\r\n): boolean {\r\n  if (!schedule.enabled || schedule.type === 'off') {\r\n    return false;\r\n  }\r\n\r\n  const hours = currentTime.getHours();\r\n  const minutes = currentTime.getMinutes();\r\n  const currentMinutes = hours * 60 + minutes;\r\n\r\n  if (schedule.type === 'time' && schedule.lightTime && schedule.darkTime) {\r\n    const [lightHour, lightMin] = schedule.lightTime.split(':').map(Number);\r\n    const [darkHour, darkMin] = schedule.darkTime.split(':').map(Number);\r\n\r\n    const lightMinutes = lightHour * 60 + lightMin;\r\n    const darkMinutes = darkHour * 60 + darkMin;\r\n\r\n    if (lightMinutes > darkMinutes) {\r\n      // Normal day (light time is after dark time)\r\n      // Dark period: from darkTime to lightTime\r\n      return currentMinutes >= darkMinutes && currentMinutes < lightMinutes;\r\n    } else {\r\n      // Overnight (light time is before dark time)\r\n      // Light period: from lightTime to darkTime (crossing midnight)\r\n      // Dark period: from darkTime to lightTime (next day)\r\n      return currentMinutes >= darkMinutes || currentMinutes < lightMinutes;\r\n    }\r\n  }\r\n\r\n  // For sunset/location-based scheduling, this would need to be implemented\r\n  // with actual sunrise/sunset calculation\r\n  return false;\r\n}\r\n\r\n/**\r\n * Validates theme configuration\r\n */\r\nexport function validateThemeConfig(config: any): boolean {\r\n  try {\r\n    if (!config || typeof config !== 'object') return false;\r\n\r\n    // Check required properties\r\n    if (!['light', 'dark', 'auto'].includes(config.colorMode)) return false;\r\n    if (typeof config.accentColor !== 'string') return false;\r\n    if (typeof config.palette !== 'string') return false;\r\n\r\n    // Validate hex color\r\n    if (!/^#[0-9A-F]{6}$/i.test(config.accentColor)) return false;\r\n\r\n    return true;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Exports theme configuration\r\n */\r\nexport function exportThemeConfig(theme: any): string {\r\n  const config = {\r\n    version: '1.0',\r\n    timestamp: new Date().toISOString(),\r\n    theme: {\r\n      colorMode: theme.colorMode,\r\n      palette: theme.colorPalette,\r\n      accentColor: theme.accentColor,\r\n      accessibilityPrefs: theme.accessibilityPrefs,\r\n      themeSchedule: theme.themeSchedule,\r\n    },\r\n  };\r\n\r\n  return JSON.stringify(config, null, 2);\r\n}\r\n\r\n/**\r\n * Imports theme configuration\r\n */\r\nexport function importThemeConfig(configString: string): any | null {\r\n  try {\r\n    const config = JSON.parse(configString);\r\n\r\n    if (!config.theme || !validateThemeConfig(config.theme)) {\r\n      throw new Error('Invalid theme configuration');\r\n    }\r\n\r\n    return config.theme;\r\n  } catch (error) {\r\n    console.error('Failed to import theme configuration:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Generates CSS custom properties for a theme\r\n */\r\nexport function generateThemeCSS(theme: any): string {\r\n  const { colorMode, accentColor, accessibilityPrefs } = theme;\r\n\r\n  let css = ':root {\\n';\r\n  css += `  --accent: ${accentColor};\\n`;\r\n  css += `  --accent-rgb: ${hexToRgb(accentColor)};\\n`;\r\n\r\n  if (accessibilityPrefs.highContrast) {\r\n    css += '  --border-width: 2px;\\n';\r\n    css += '  --focus-ring-width: 3px;\\n';\r\n  }\r\n\r\n  if (accessibilityPrefs.reducedMotion) {\r\n    css += '  --transition-duration: 0ms;\\n';\r\n    css += '  --animation-duration: 0ms;\\n';\r\n  }\r\n\r\n  css += '}\\n';\r\n\r\n  return css;\r\n}\r\n\r\n/**\r\n * Converts hex color to RGB values\r\n */\r\nfunction hexToRgb(hex: string): string {\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  if (!result) return '0, 0, 0';\r\n\r\n  const r = parseInt(result[1], 16);\r\n  const g = parseInt(result[2], 16);\r\n  const b = parseInt(result[3], 16);\r\n\r\n  return `${r}, ${g}, ${b}`;\r\n}\r\n\r\n/**\r\n * Calculates color contrast ratio\r\n */\r\nexport function getContrastRatio(color1: string, color2: string): number {\r\n  const getLuminance = (hex: string): number => {\r\n    const rgb = hexToRgb(hex).split(', ').map(Number);\r\n    const [r, g, b] = rgb.map((c) => {\r\n      c = c / 255;\r\n      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\r\n    });\r\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\r\n  };\r\n\r\n  const lum1 = getLuminance(color1);\r\n  const lum2 = getLuminance(color2);\r\n  const brightest = Math.max(lum1, lum2);\r\n  const darkest = Math.min(lum1, lum2);\r\n\r\n  return (brightest + 0.05) / (darkest + 0.05);\r\n}\r\n\r\n/**\r\n * Checks if color combination meets WCAG accessibility standards\r\n */\r\nexport function meetsAccessibilityStandards(\r\n  foreground: string,\r\n  background: string,\r\n  level: 'AA' | 'AAA' = 'AA'\r\n): boolean {\r\n  const ratio = getContrastRatio(foreground, background);\r\n  return level === 'AA' ? ratio >= 4.5 : ratio >= 7;\r\n}\r\n"],"names":["ACCESSIBILITY_PRESETS","THEME_PRESETS","detectSystemPreferences","exportThemeConfig","generateThemeCSS","getContrastRatio","getCurrentLocation","getSunriseSunset","importThemeConfig","meetsAccessibilityStandards","shouldUseDarkModeBySchedule","validateThemeConfig","id","name","description","colorMode","palette","accentColor","preview","background","foreground","accent","default","reducedMotion","highContrast","forcedColors","fontSize","focusIndicators","accessible","lowVision","window","colorScheme","matchMedia","matches","lat","lng","date","targetDate","Date","dateStr","toISOString","split","response","fetch","ok","Error","data","json","status","sunrise","results","sunset","error","console","warn","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","city","locality","countryName","enableHighAccuracy","timeout","maximumAge","schedule","currentTime","enabled","type","hours","getHours","minutes","getMinutes","currentMinutes","lightTime","darkTime","lightHour","lightMin","map","Number","darkHour","darkMin","lightMinutes","darkMinutes","config","includes","test","theme","version","timestamp","colorPalette","accessibilityPrefs","themeSchedule","JSON","stringify","configString","parse","css","hexToRgb","hex","result","exec","r","parseInt","g","b","color1","color2","getLuminance","rgb","c","Math","pow","lum1","lum2","brightest","max","darkest","min","level","ratio"],"mappings":"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"}