{"version":3,"sources":["/Users/aena/Developer/echo/frontend/src/hooks/useResponsive.tsx"],"sourcesContent":["/**\n * @fileoverview Responsive Design Hook\n * @description Custom hook for detecting viewport size and responsive breakpoints\n * @version 1.0.0\n */\n\n'use client';\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\n\nexport interface ResponsiveState {\n  isMobile: boolean;\n  isTablet: boolean;\n  isDesktop: boolean;\n  isLargeDesktop: boolean;\n  width: number;\n  height: number;\n  breakpoint: 'sm' | 'md' | 'lg' | 'xl';\n  isPortrait?: boolean;\n  isLandscape?: boolean;\n  isTouchDevice?: boolean;\n  prefersReducedMotion?: boolean;\n  prefersHighContrast?: boolean;\n  prefersDarkMode?: boolean;\n}\n\ninterface BreakpointConfig {\n  mobile?: string;\n  tablet?: string;\n  desktop?: string;\n  xl?: string;\n}\n\n/**\n * Hook to detect current viewport size and breakpoints\n */\nexport function useResponsive(\n  customBreakpoints?: BreakpointConfig\n): ResponsiveState {\n  const [state, setState] = useState<ResponsiveState>(() => {\n    // SSR-safe initial state\n    if (typeof window === 'undefined') {\n      return {\n        isMobile: false,\n        isTablet: false,\n        isDesktop: true,\n        isLargeDesktop: false,\n        width: 1024,\n        height: 768,\n        breakpoint: 'lg',\n        isPortrait: false,\n        isLandscape: true,\n        isTouchDevice: false,\n        prefersReducedMotion: false,\n        prefersHighContrast: false,\n        prefersDarkMode: false,\n      };\n    }\n\n    // Calculate initial state based on current window dimensions\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const isMobile = width < 768;\n    const isTablet = width >= 768 && width < 1024;\n    const isDesktop = width >= 1024 && width < 1280;\n    const isLargeDesktop = width >= 1280;\n    const breakpoint: ResponsiveState['breakpoint'] = isMobile\n      ? 'sm'\n      : isTablet\n        ? 'md'\n        : isLargeDesktop\n          ? 'xl'\n          : 'lg';\n\n    return {\n      isMobile,\n      isTablet,\n      isDesktop,\n      isLargeDesktop,\n      width,\n      height,\n      breakpoint,\n      isPortrait: height > width,\n      isLandscape: width >= height,\n      isTouchDevice:\n        typeof navigator !== 'undefined' ? navigator.maxTouchPoints > 0 : false,\n      prefersReducedMotion: false,\n      prefersHighContrast: false,\n      prefersDarkMode: false,\n    };\n  });\n\n  const mediaQueries = useMemo(() => {\n    if (typeof window === 'undefined' || !window.matchMedia) {\n      return null;\n    }\n\n    // Use custom breakpoints if provided, otherwise use defaults\n    const breakpoints = customBreakpoints || {\n      mobile: '(max-width: 767px)',\n      tablet: '(min-width: 768px) and (max-width: 1023px)',\n      desktop: '(min-width: 1024px)',\n      xl: '(min-width: 1280px)',\n    };\n\n    try {\n      return {\n        mobile: window.matchMedia(breakpoints.mobile || '(max-width: 767px)'),\n        tablet: window.matchMedia(\n          breakpoints.tablet || '(min-width: 768px) and (max-width: 1023px)'\n        ),\n        desktop: window.matchMedia(\n          breakpoints.desktop || '(min-width: 1024px)'\n        ),\n        xl: window.matchMedia(breakpoints.xl || '(min-width: 1280px)'),\n        portrait: window.matchMedia('(orientation: portrait)'),\n        landscape: window.matchMedia('(orientation: landscape)'),\n        reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)'),\n        highContrast: window.matchMedia('(prefers-contrast: high)'),\n        darkMode: window.matchMedia('(prefers-color-scheme: dark)'),\n      };\n    } catch (error) {\n      // Handle invalid media query syntax\n      console.warn('Invalid media query syntax:', error);\n      return null;\n    }\n  }, [customBreakpoints]);\n\n  // PERFORMANCE FIX: Memoize updateState with useCallback to prevent recreating on every render\n  const updateState = useCallback(() => {\n    if (typeof window === 'undefined') return;\n\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n\n    // Use window dimensions as fallback if matchMedia is not available\n    let isMobile, isTablet, isDesktop, isLargeDesktop;\n\n    if (mediaQueries) {\n      isMobile = mediaQueries.mobile.matches;\n      isTablet = mediaQueries.tablet.matches;\n      isDesktop = mediaQueries.desktop.matches && !mediaQueries.xl.matches;\n      isLargeDesktop = mediaQueries.xl.matches;\n    } else {\n      // Fallback to window dimensions\n      isMobile = width < 768;\n      isTablet = width >= 768 && width < 1024;\n      isDesktop = width >= 1024 && width < 1280;\n      isLargeDesktop = width >= 1280;\n    }\n\n    const breakpoint: ResponsiveState['breakpoint'] = isMobile\n      ? 'sm'\n      : isTablet\n        ? 'md'\n        : isLargeDesktop\n          ? 'xl'\n          : 'lg';\n\n    setState({\n      isMobile,\n      isTablet,\n      isDesktop,\n      isLargeDesktop,\n      width,\n      height,\n      breakpoint,\n      isPortrait: mediaQueries ? mediaQueries.portrait.matches : height > width,\n      isLandscape: mediaQueries\n        ? mediaQueries.landscape.matches\n        : width >= height,\n      isTouchDevice:\n        typeof navigator !== 'undefined' ? navigator.maxTouchPoints > 0 : false,\n      prefersReducedMotion: mediaQueries\n        ? mediaQueries.reducedMotion.matches\n        : false,\n      prefersHighContrast: mediaQueries\n        ? mediaQueries.highContrast.matches\n        : false,\n      prefersDarkMode: mediaQueries ? mediaQueries.darkMode.matches : false,\n    });\n  }, [mediaQueries]);\n\n  useEffect(() => {\n    // PERFORMANCE FIX: Debounce resize events with requestAnimationFrame\n    let rafId: number | null = null;\n    const debouncedUpdateState = () => {\n      if (rafId !== null) {\n        cancelAnimationFrame(rafId);\n      }\n      rafId = requestAnimationFrame(() => {\n        updateState();\n        rafId = null;\n      });\n    };\n\n    // Initial call\n    updateState();\n\n    // Add event listeners\n    if (mediaQueries) {\n      const queries = Object.values(mediaQueries);\n      queries.forEach((query) => {\n        if (query && query.addEventListener) {\n          // Use updateState directly for media query changes (they're already specific)\n          query.addEventListener('change', updateState);\n        }\n      });\n    }\n\n    // PERFORMANCE FIX: Use debounced version for resize events (fires frequently)\n    if (typeof window !== 'undefined') {\n      window.addEventListener('resize', debouncedUpdateState);\n    }\n\n    // Cleanup\n    return () => {\n      // Cancel any pending animation frame\n      if (rafId !== null) {\n        cancelAnimationFrame(rafId);\n      }\n\n      if (mediaQueries) {\n        const queries = Object.values(mediaQueries);\n        queries.forEach((query) => {\n          if (query && query.removeEventListener) {\n            query.removeEventListener('change', updateState);\n          }\n        });\n      }\n      if (typeof window !== 'undefined') {\n        window.removeEventListener('resize', debouncedUpdateState);\n      }\n    };\n  }, [mediaQueries, updateState]);\n\n  return state;\n}\n\n/**\n * Hook to check if viewport matches specific breakpoint\n */\nexport function useBreakpoint(breakpoint: string): boolean {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    function updateMatches() {\n      const width = window.innerWidth;\n\n      // Handle both media query strings and breakpoint names\n      if (breakpoint.includes('(')) {\n        // It's a media query string\n        if (window.matchMedia) {\n          const mediaQuery = window.matchMedia(breakpoint);\n          setMatches(mediaQuery.matches);\n        }\n      } else {\n        // It's a breakpoint name, use width-based logic\n        let result = false;\n        switch (breakpoint) {\n          case 'sm':\n            result = width < 768;\n            break;\n          case 'md':\n            result = width >= 768 && width < 1024;\n            break;\n          case 'lg':\n            result = width >= 1024 && width < 1280;\n            break;\n          case 'xl':\n            result = width >= 1280;\n            break;\n          default:\n            // For other strings, try as media query if matchMedia is available\n            if (window.matchMedia) {\n              const mediaQuery = window.matchMedia(breakpoint);\n              result = mediaQuery.matches;\n            }\n        }\n        setMatches(result);\n      }\n    }\n\n    updateMatches();\n\n    // Set up listeners\n    if (breakpoint.includes('(') && window.matchMedia) {\n      const mediaQuery = window.matchMedia(breakpoint);\n      mediaQuery.addEventListener('change', updateMatches);\n      window.addEventListener('resize', updateMatches);\n      return () => {\n        mediaQuery.removeEventListener('change', updateMatches);\n        window.removeEventListener('resize', updateMatches);\n      };\n    } else {\n      window.addEventListener('resize', updateMatches);\n      return () => window.removeEventListener('resize', updateMatches);\n    }\n  }, [breakpoint]);\n\n  return matches;\n}\n\n/**\n * Hook for window dimensions\n * PERFORMANCE FIX: Debounced with requestAnimationFrame\n */\nexport function useWindowSize() {\n  const [size, setSize] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\n  });\n\n  useEffect(() => {\n    let rafId: number | null = null;\n\n    const handleResize = () => {\n      if (rafId !== null) {\n        cancelAnimationFrame(rafId);\n      }\n      rafId = requestAnimationFrame(() => {\n        setSize({\n          width: window.innerWidth,\n          height: window.innerHeight,\n        });\n        rafId = null;\n      });\n    };\n\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => {\n      if (rafId !== null) {\n        cancelAnimationFrame(rafId);\n      }\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return size;\n}\n\n/**\n * Hook for orientation detection\n */\nexport function useOrientation() {\n  const [orientation, setOrientation] = useState<'portrait' | 'landscape'>(\n    'portrait'\n  );\n\n  useEffect(() => {\n    function handleOrientationChange() {\n      setOrientation(\n        window.innerHeight > window.innerWidth ? 'portrait' : 'landscape'\n      );\n    }\n\n    handleOrientationChange();\n    window.addEventListener('resize', handleOrientationChange);\n    return () => window.removeEventListener('resize', handleOrientationChange);\n  }, []);\n\n  return orientation;\n}\n\nexport default useResponsive;\n"],"names":["useResponsive","useBreakpoint","useWindowSize","useOrientation","customBreakpoints","state","setState","useState","window","isMobile","isTablet","isDesktop","isLargeDesktop","width","height","breakpoint","isPortrait","isLandscape","isTouchDevice","prefersReducedMotion","prefersHighContrast","prefersDarkMode","innerWidth","innerHeight","navigator","maxTouchPoints","mediaQueries","useMemo","matchMedia","breakpoints","mobile","tablet","desktop","xl","portrait","landscape","reducedMotion","highContrast","darkMode","error","console","warn","updateState","useCallback","matches","useEffect","rafId","debouncedUpdateState","cancelAnimationFrame","requestAnimationFrame","queries","Object","values","forEach","query","addEventListener","removeEventListener","setMatches","updateMatches","includes","mediaQuery","result","size","setSize","handleResize","orientation","setOrientation","handleOrientationChange"],"mappings":"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"}