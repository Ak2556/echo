{"version":3,"sources":["/Users/aena/Developer/echo/frontend/src/utils/themeUtils.ts"],"sourcesContent":["/**\n * Theme Management Utilities\n * Enhanced utilities for theme management, accessibility, and user preferences\n */\n\nexport interface ThemePreset {\n  id: string;\n  name: string;\n  description: string;\n  colorMode: 'light' | 'dark' | 'auto';\n  palette: string;\n  accentColor: string;\n  preview: {\n    background: string;\n    foreground: string;\n    accent: string;\n  };\n}\n\nexport interface AccessibilitySettings {\n  reducedMotion: boolean;\n  highContrast: boolean;\n  forcedColors: boolean;\n  fontSize: 'small' | 'medium' | 'large' | 'xl';\n  focusIndicators: 'subtle' | 'prominent';\n}\n\nexport interface ThemeScheduleConfig {\n  type: 'off' | 'sunset' | 'time' | 'location';\n  lightTime?: string;\n  darkTime?: string;\n  location?: {\n    lat: number;\n    lng: number;\n    name: string;\n  };\n  enabled: boolean;\n}\n\n/**\n * Predefined theme presets\n */\nexport const THEME_PRESETS: ThemePreset[] = [\n  {\n    id: 'auto',\n    name: 'Auto',\n    description: 'Follows your system preference',\n    colorMode: 'auto',\n    palette: 'mono',\n    accentColor: '#007aff',\n    preview: {\n      background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\n      foreground: '#1e293b',\n      accent: '#007aff',\n    },\n  },\n  {\n    id: 'light',\n    name: 'Light',\n    description: 'Clean and bright interface',\n    colorMode: 'light',\n    palette: 'mono',\n    accentColor: '#007aff',\n    preview: {\n      background: '#ffffff',\n      foreground: '#1e293b',\n      accent: '#007aff',\n    },\n  },\n  {\n    id: 'dark',\n    name: 'Dark',\n    description: 'Easy on the eyes in low light',\n    colorMode: 'dark',\n    palette: 'dark',\n    accentColor: '#60a5fa',\n    preview: {\n      background: '#0f172a',\n      foreground: '#f8fafc',\n      accent: '#60a5fa',\n    },\n  },\n  {\n    id: 'blue',\n    name: 'Ocean Blue',\n    description: 'Calming blue tones',\n    colorMode: 'light',\n    palette: 'blue',\n    accentColor: '#3b82f6',\n    preview: {\n      background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\n      foreground: '#1e3a8a',\n      accent: '#3b82f6',\n    },\n  },\n  {\n    id: 'green',\n    name: 'Nature Green',\n    description: 'Fresh and natural',\n    colorMode: 'light',\n    palette: 'green',\n    accentColor: '#10b981',\n    preview: {\n      background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\n      foreground: '#064e3b',\n      accent: '#10b981',\n    },\n  },\n  {\n    id: 'red',\n    name: 'Nothing Red',\n    description: 'Bold Nothing Phone style',\n    colorMode: 'light',\n    palette: 'red',\n    accentColor: '#ef4444',\n    preview: {\n      background: 'linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)',\n      foreground: '#7f1d1d',\n      accent: '#ef4444',\n    },\n  },\n];\n\n/**\n * Accessibility presets\n */\nexport const ACCESSIBILITY_PRESETS: Record<string, AccessibilitySettings> = {\n  default: {\n    reducedMotion: false,\n    highContrast: false,\n    forcedColors: false,\n    fontSize: 'medium',\n    focusIndicators: 'subtle',\n  },\n  accessible: {\n    reducedMotion: true,\n    highContrast: true,\n    forcedColors: false,\n    fontSize: 'large',\n    focusIndicators: 'prominent',\n  },\n  lowVision: {\n    reducedMotion: true,\n    highContrast: true,\n    forcedColors: true,\n    fontSize: 'xl',\n    focusIndicators: 'prominent',\n  },\n};\n\n/**\n * Detects user's system preferences\n */\nexport function detectSystemPreferences(): {\n  colorScheme: 'light' | 'dark';\n  reducedMotion: boolean;\n  highContrast: boolean;\n  forcedColors: boolean;\n} {\n  if (typeof window === 'undefined') {\n    return {\n      colorScheme: 'light',\n      reducedMotion: false,\n      highContrast: false,\n      forcedColors: false,\n    };\n  }\n\n  return {\n    colorScheme: window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light',\n    reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)')\n      .matches,\n    highContrast: window.matchMedia('(prefers-contrast: high)').matches,\n    forcedColors: window.matchMedia('(forced-colors: active)').matches,\n  };\n}\n\n/**\n * Gets sunrise and sunset times for a location\n */\nexport async function getSunriseSunset(\n  lat: number,\n  lng: number,\n  date?: Date\n): Promise<{ sunrise: Date; sunset: Date } | null> {\n  try {\n    const targetDate = date || new Date();\n    const dateStr = targetDate.toISOString().split('T')[0];\n\n    const response = await fetch(\n      `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lng}&date=${dateStr}&formatted=0`\n    );\n\n    if (!response.ok) throw new Error('Failed to fetch sunrise/sunset data');\n\n    const data = await response.json();\n\n    if (data.status !== 'OK')\n      throw new Error('Invalid sunrise/sunset response');\n\n    return {\n      sunrise: new Date(data.results.sunrise),\n      sunset: new Date(data.results.sunset),\n    };\n  } catch (error) {\n    console.warn('Failed to fetch sunrise/sunset times:', error);\n    return null;\n  }\n}\n\n/**\n * Gets user's current location\n */\nexport function getCurrentLocation(): Promise<{\n  lat: number;\n  lng: number;\n  name?: string;\n}> {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) {\n      reject(new Error('Geolocation is not supported'));\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        const { latitude: lat, longitude: lng } = position.coords;\n\n        try {\n          // Try to get location name using reverse geocoding\n          const response = await fetch(\n            `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=en`\n          );\n\n          if (response.ok) {\n            const data = await response.json();\n            const name =\n              data.city ||\n              data.locality ||\n              data.countryName ||\n              'Unknown Location';\n            resolve({ lat, lng, name });\n          } else {\n            resolve({ lat, lng });\n          }\n        } catch (error) {\n          resolve({ lat, lng });\n        }\n      },\n      (error) => {\n        reject(error);\n      },\n      {\n        enableHighAccuracy: false,\n        timeout: 10000,\n        maximumAge: 300000, // 5 minutes\n      }\n    );\n  });\n}\n\n/**\n * Calculates if it should be dark mode based on schedule\n */\nexport function shouldUseDarkModeBySchedule(\n  schedule: ThemeScheduleConfig,\n  currentTime: Date = new Date()\n): boolean {\n  if (!schedule.enabled || schedule.type === 'off') {\n    return false;\n  }\n\n  const hours = currentTime.getHours();\n  const minutes = currentTime.getMinutes();\n  const currentMinutes = hours * 60 + minutes;\n\n  if (schedule.type === 'time' && schedule.lightTime && schedule.darkTime) {\n    const [lightHour, lightMin] = schedule.lightTime.split(':').map(Number);\n    const [darkHour, darkMin] = schedule.darkTime.split(':').map(Number);\n\n    const lightMinutes = lightHour * 60 + lightMin;\n    const darkMinutes = darkHour * 60 + darkMin;\n\n    if (lightMinutes > darkMinutes) {\n      // Normal day (light time is after dark time)\n      // Dark period: from darkTime to lightTime\n      return currentMinutes >= darkMinutes && currentMinutes < lightMinutes;\n    } else {\n      // Overnight (light time is before dark time)\n      // Light period: from lightTime to darkTime (crossing midnight)\n      // Dark period: from darkTime to lightTime (next day)\n      return currentMinutes >= darkMinutes || currentMinutes < lightMinutes;\n    }\n  }\n\n  // For sunset/location-based scheduling, this would need to be implemented\n  // with actual sunrise/sunset calculation\n  return false;\n}\n\n/**\n * Validates theme configuration\n */\nexport function validateThemeConfig(config: any): boolean {\n  try {\n    if (!config || typeof config !== 'object') return false;\n\n    // Check required properties\n    if (!['light', 'dark', 'auto'].includes(config.colorMode)) return false;\n    if (typeof config.accentColor !== 'string') return false;\n    if (typeof config.palette !== 'string') return false;\n\n    // Validate hex color\n    if (!/^#[0-9A-F]{6}$/i.test(config.accentColor)) return false;\n\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Exports theme configuration\n */\nexport function exportThemeConfig(theme: any): string {\n  const config = {\n    version: '1.0',\n    timestamp: new Date().toISOString(),\n    theme: {\n      colorMode: theme.colorMode,\n      palette: theme.colorPalette,\n      accentColor: theme.accentColor,\n      accessibilityPrefs: theme.accessibilityPrefs,\n      themeSchedule: theme.themeSchedule,\n    },\n  };\n\n  return JSON.stringify(config, null, 2);\n}\n\n/**\n * Imports theme configuration\n */\nexport function importThemeConfig(configString: string): any | null {\n  try {\n    const config = JSON.parse(configString);\n\n    if (!config.theme || !validateThemeConfig(config.theme)) {\n      throw new Error('Invalid theme configuration');\n    }\n\n    return config.theme;\n  } catch (error) {\n    console.error('Failed to import theme configuration:', error);\n    return null;\n  }\n}\n\n/**\n * Generates CSS custom properties for a theme\n */\nexport function generateThemeCSS(theme: any): string {\n  const { colorMode, accentColor, accessibilityPrefs } = theme;\n\n  let css = ':root {\\n';\n  css += `  --accent: ${accentColor};\\n`;\n  css += `  --accent-rgb: ${hexToRgb(accentColor)};\\n`;\n\n  if (accessibilityPrefs.highContrast) {\n    css += '  --border-width: 2px;\\n';\n    css += '  --focus-ring-width: 3px;\\n';\n  }\n\n  if (accessibilityPrefs.reducedMotion) {\n    css += '  --transition-duration: 0ms;\\n';\n    css += '  --animation-duration: 0ms;\\n';\n  }\n\n  css += '}\\n';\n\n  return css;\n}\n\n/**\n * Converts hex color to RGB values\n */\nfunction hexToRgb(hex: string): string {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (!result) return '0, 0, 0';\n\n  const r = parseInt(result[1], 16);\n  const g = parseInt(result[2], 16);\n  const b = parseInt(result[3], 16);\n\n  return `${r}, ${g}, ${b}`;\n}\n\n/**\n * Calculates color contrast ratio\n */\nexport function getContrastRatio(color1: string, color2: string): number {\n  const getLuminance = (hex: string): number => {\n    const rgb = hexToRgb(hex).split(', ').map(Number);\n    const [r, g, b] = rgb.map((c) => {\n      c = c / 255;\n      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n    });\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  };\n\n  const lum1 = getLuminance(color1);\n  const lum2 = getLuminance(color2);\n  const brightest = Math.max(lum1, lum2);\n  const darkest = Math.min(lum1, lum2);\n\n  return (brightest + 0.05) / (darkest + 0.05);\n}\n\n/**\n * Checks if color combination meets WCAG accessibility standards\n */\nexport function meetsAccessibilityStandards(\n  foreground: string,\n  background: string,\n  level: 'AA' | 'AAA' = 'AA'\n): boolean {\n  const ratio = getContrastRatio(foreground, background);\n  return level === 'AA' ? ratio >= 4.5 : ratio >= 7;\n}\n"],"names":["THEME_PRESETS","ACCESSIBILITY_PRESETS","detectSystemPreferences","getSunriseSunset","getCurrentLocation","shouldUseDarkModeBySchedule","validateThemeConfig","exportThemeConfig","importThemeConfig","generateThemeCSS","getContrastRatio","meetsAccessibilityStandards","id","name","description","colorMode","palette","accentColor","preview","background","foreground","accent","default","reducedMotion","highContrast","forcedColors","fontSize","focusIndicators","accessible","lowVision","window","colorScheme","matchMedia","matches","lat","lng","date","targetDate","Date","dateStr","toISOString","split","response","fetch","ok","Error","data","json","status","sunrise","results","sunset","error","console","warn","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","city","locality","countryName","enableHighAccuracy","timeout","maximumAge","schedule","currentTime","enabled","type","hours","getHours","minutes","getMinutes","currentMinutes","lightTime","darkTime","lightHour","lightMin","map","Number","darkHour","darkMin","lightMinutes","darkMinutes","config","includes","test","theme","version","timestamp","colorPalette","accessibilityPrefs","themeSchedule","JSON","stringify","configString","parse","css","hexToRgb","hex","result","exec","r","parseInt","g","b","color1","color2","getLuminance","rgb","c","Math","pow","lum1","lum2","brightest","max","darkest","min","level","ratio"],"mappings":"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"}