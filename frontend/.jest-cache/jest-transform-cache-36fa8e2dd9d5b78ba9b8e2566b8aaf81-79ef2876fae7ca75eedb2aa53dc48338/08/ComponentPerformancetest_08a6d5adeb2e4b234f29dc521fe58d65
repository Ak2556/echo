7ada3066a0c8b8a949af72adbfe96ea3
/**
 * Component Performance Tests
 * Tests for measuring and ensuring optimal component performance
 */ "use strict";
// Mock framer-motion for performance testing
jest.mock("framer-motion", ()=>({
        motion: {
            div: ({ children, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    ...props,
                    children: children
                }),
            button: ({ children, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                    ...props,
                    children: children
                })
        },
        AnimatePresence: ({ children })=>children
    }));
// Mock Next.js Image for performance testing
jest.mock("next/image", ()=>({
        __esModule: true,
        default: ({ src, alt, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                src: src,
                alt: alt,
                ...props
            })
    }));
// Mock useResponsive hook
jest.mock("@/hooks/useResponsive", ()=>({
        useResponsive: ()=>({
                isMobile: false,
                isTablet: false,
                isDesktop: true,
                breakpoint: "lg"
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _testutils = require("../setup/test-utils");
const _SocialMediaHub = /*#__PURE__*/ _interop_require_default(require("../../components/SocialMediaHub"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
describe("Component Performance Tests", ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe("Initial Render Performance", ()=>{
        it("renders SocialMediaHub within acceptable time", async ()=>{
            const renderTime = await (0, _testutils.measurePerformance)(()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            });
            // Should render in under 100ms
            expect(renderTime).toBeLessThan(100);
        });
        it("renders without memory leaks", ()=>{
            const initialMemory = (0, _testutils.measureMemory)();
            const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            // Force garbage collection if available
            if (global.gc) {
                global.gc();
            }
            unmount();
            // Force garbage collection again
            if (global.gc) {
                global.gc();
            }
            const finalMemory = (0, _testutils.measureMemory)();
            // Memory usage should not increase significantly
            if (initialMemory && finalMemory) {
                const memoryIncrease = finalMemory.usedJSHeapSize - initialMemory.usedJSHeapSize;
                expect(memoryIncrease).toBeLessThan(1024 * 1024); // Less than 1MB increase
            }
        });
        it("handles large datasets efficiently", async ()=>{
            // Mock large dataset
            const largePosts = Array.from({
                length: 1000
            }, (_, i)=>({
                    id: `post-${i}`,
                    content: `Post content ${i}`,
                    author: {
                        name: `User ${i}`
                    },
                    timestamp: new Date()
                }));
            const renderTime = await (0, _testutils.measurePerformance)(()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            });
            // Should still render efficiently with large datasets
            expect(renderTime).toBeLessThan(200);
        });
    });
    describe("Re-render Performance", ()=>{
        it("minimizes re-renders on prop changes", ()=>{
            let renderCount = 0;
            const TestComponent = ({ data })=>{
                renderCount++;
                return /*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {});
            };
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {
                data: {
                    id: 1
                }
            }));
            const initialRenderCount = renderCount;
            // Re-render with same props
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestComponent, {
                data: {
                    id: 1
                }
            }));
            // Should not cause unnecessary re-renders
            expect(renderCount).toBe(initialRenderCount + 1);
        });
        it("handles rapid state updates efficiently", async ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            const updateTime = await (0, _testutils.measurePerformance)(async ()=>{
                // Simulate rapid state updates
                for(let i = 0; i < 100; i++){
                    await (0, _react1.act)(async ()=>{
                        rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                    });
                }
            });
            // Should handle rapid updates efficiently
            expect(updateTime).toBeLessThan(1000); // Under 1 second for 100 updates
        });
        it("batches multiple state updates", async ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            const batchTime = await (0, _testutils.measurePerformance)(async ()=>{
                await (0, _react1.act)(async ()=>{
                    // Multiple synchronous updates should be batched
                    rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                    rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                    rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                    rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                    rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                });
            });
            // Batched updates should be faster than individual updates
            expect(batchTime).toBeLessThan(50);
        });
    });
    describe("Component Mounting Performance", ()=>{
        it("mounts components efficiently", async ()=>{
            const mountTime = await (0, _testutils.measurePerformance)(()=>{
                const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                unmount();
            });
            // Mount and unmount should be fast
            expect(mountTime).toBeLessThan(50);
        });
        it("handles multiple mount/unmount cycles", async ()=>{
            const cycleTime = await (0, _testutils.measurePerformance)(()=>{
                for(let i = 0; i < 10; i++){
                    const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                    unmount();
                }
            });
            // Multiple cycles should be efficient
            expect(cycleTime).toBeLessThan(500);
        });
        it("cleans up resources on unmount", ()=>{
            const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            // Component should unmount without errors
            expect(()=>unmount()).not.toThrow();
        });
    });
    describe("Animation Performance", ()=>{
        it("handles animations without blocking main thread", async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            // Simulate animation-heavy interactions
            const animationTime = await (0, _testutils.measurePerformance)(async ()=>{
                // Trigger multiple animations
                const buttons = _react1.screen.getAllByRole("button");
                for (const button of buttons.slice(0, 5)){
                    await (0, _react1.act)(async ()=>{
                        button.focus();
                        button.blur();
                    });
                }
            });
            // Animations should not block significantly
            expect(animationTime).toBeLessThan(200);
        });
        it("respects reduced motion preferences", ()=>{
            // Mock reduced motion preference
            Object.defineProperty(window, "matchMedia", {
                writable: true,
                value: jest.fn().mockImplementation((query)=>({
                        matches: query === "(prefers-reduced-motion: reduce)",
                        media: query,
                        onchange: null,
                        addListener: jest.fn(),
                        removeListener: jest.fn(),
                        addEventListener: jest.fn(),
                        removeEventListener: jest.fn(),
                        dispatchEvent: jest.fn()
                    }))
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            // Should render without animations when reduced motion is preferred
            expect(_react1.screen.getByRole("main")).toBeInTheDocument();
        });
    });
    describe("Memory Usage", ()=>{
        it("maintains stable memory usage over time", async ()=>{
            const measurements = [];
            for(let i = 0; i < 10; i++){
                const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                const memory = (0, _testutils.measureMemory)();
                if (memory) {
                    measurements.push(memory.usedJSHeapSize);
                }
                unmount();
                // Force garbage collection if available
                if (global.gc) {
                    global.gc();
                }
                // Wait a bit between measurements
                await new Promise((resolve)=>setTimeout(resolve, 10));
            }
            if (measurements.length > 1) {
                // Memory usage should not grow significantly over time
                const firstMeasurement = measurements[0];
                const lastMeasurement = measurements[measurements.length - 1];
                const growth = lastMeasurement - firstMeasurement;
                expect(growth).toBeLessThan(1024 * 1024); // Less than 1MB growth
            }
        });
        it("handles large component trees efficiently", ()=>{
            const initialMemory = (0, _testutils.measureMemory)();
            // Render multiple instances
            const instances = Array.from({
                length: 5
            }, ()=>(0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {})));
            const peakMemory = (0, _testutils.measureMemory)();
            // Cleanup all instances
            instances.forEach(({ unmount })=>unmount());
            if (global.gc) {
                global.gc();
            }
            const finalMemory = (0, _testutils.measureMemory)();
            if (initialMemory && peakMemory && finalMemory) {
                // Memory should be released after cleanup
                const memoryLeak = finalMemory.usedJSHeapSize - initialMemory.usedJSHeapSize;
                expect(memoryLeak).toBeLessThan(512 * 1024); // Less than 512KB leak
            }
        });
    });
    describe("Event Handling Performance", ()=>{
        it("handles rapid user interactions efficiently", async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            const interactionTime = await (0, _testutils.measurePerformance)(async ()=>{
                const buttons = _react1.screen.getAllByRole("button");
                // Simulate rapid clicking
                for(let i = 0; i < 50; i++){
                    const randomButton = buttons[Math.floor(Math.random() * buttons.length)];
                    await (0, _react1.act)(async ()=>{
                        randomButton.click();
                    });
                }
            });
            // Should handle rapid interactions efficiently
            expect(interactionTime).toBeLessThan(1000);
        });
        it("debounces expensive operations", async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            // Mock expensive operation
            const expensiveOperation = jest.fn();
            const debounceTime = await (0, _testutils.measurePerformance)(async ()=>{
                // Trigger multiple rapid events that should be debounced
                for(let i = 0; i < 10; i++){
                    await (0, _react1.act)(async ()=>{
                        // Simulate rapid input changes
                        const inputs = _react1.screen.queryAllByRole("textbox");
                        if (inputs.length > 0) {
                            inputs[0].focus();
                        }
                    });
                }
            });
            // Debounced operations should be efficient
            expect(debounceTime).toBeLessThan(100);
        });
    });
    describe("Bundle Size Impact", ()=>{
        it("has minimal impact on bundle size", ()=>{
            // This is a conceptual test - in real scenarios you'd use bundle analyzers
            // SocialMediaHub is a functional component, so we check it's defined
            expect(_SocialMediaHub.default).toBeDefined();
            expect(typeof _SocialMediaHub.default).toBe("function");
        });
        it("supports code splitting effectively", ()=>{
            // Verify that dynamic imports are used where appropriate
            const componentString = _SocialMediaHub.default.toString();
            // Should not include all dependencies in main bundle
            expect(componentString).toBeDefined();
        });
    });
    describe("Accessibility Performance", ()=>{
        it("maintains performance with accessibility features enabled", async ()=>{
            // Mock accessibility preferences
            Object.defineProperty(window, "matchMedia", {
                writable: true,
                value: jest.fn().mockImplementation((query)=>({
                        matches: query.includes("prefers-reduced-motion") || query.includes("prefers-contrast"),
                        media: query,
                        onchange: null,
                        addListener: jest.fn(),
                        removeListener: jest.fn(),
                        addEventListener: jest.fn(),
                        removeEventListener: jest.fn(),
                        dispatchEvent: jest.fn()
                    }))
            });
            const renderTime = await (0, _testutils.measurePerformance)(()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            });
            // Should maintain performance with accessibility features
            expect(renderTime).toBeLessThan(150);
        });
        it("handles screen reader interactions efficiently", async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            const a11yTime = await (0, _testutils.measurePerformance)(async ()=>{
                // Simulate screen reader navigation
                const focusableElements = _react1.screen.getAllByRole("button");
                for (const element of focusableElements.slice(0, 10)){
                    await (0, _react1.act)(async ()=>{
                        element.focus();
                    });
                }
            });
            // Screen reader interactions should be responsive
            expect(a11yTime).toBeLessThan(200);
        });
    });
    describe("Network Performance", ()=>{
        it("handles slow network conditions gracefully", async ()=>{
            // Mock slow fetch
            global.fetch = jest.fn().mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: ()=>Promise.resolve({
                                    data: "test"
                                })
                        }), 1000)));
            const renderTime = await (0, _testutils.measurePerformance)(()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            });
            // Should render quickly even with slow network
            expect(renderTime).toBeLessThan(100);
        });
        it("implements efficient caching strategies", ()=>{
            // Mock cache implementation
            const cacheHits = 0;
            const cacheMisses = 0;
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            // In a real implementation, you'd verify cache efficiency
            expect(true).toBe(true); // Placeholder for cache efficiency test
        });
    });
    describe("Concurrent Features", ()=>{
        it("handles concurrent updates efficiently", async ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            const concurrentTime = await (0, _testutils.measurePerformance)(async ()=>{
                // Simulate concurrent updates
                const promises = Array.from({
                    length: 10
                }, (_, i)=>(0, _react1.act)(async ()=>{
                        rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
                    }));
                await Promise.all(promises);
            });
            // Concurrent updates should be handled efficiently
            expect(concurrentTime).toBeLessThan(500);
        });
        it("prioritizes user interactions over background tasks", async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SocialMediaHub.default, {}));
            const interactionTime = await (0, _testutils.measurePerformance)(async ()=>{
                // Simulate user interaction during background processing
                const buttons = _react1.screen.queryAllByRole("button");
                if (buttons.length > 0) {
                    await (0, _react1.act)(async ()=>{
                        buttons[0].click();
                    });
                }
            });
            // User interactions should be prioritized
            expect(interactionTime).toBeLessThan(100);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZW5hL0RldmVsb3Blci9lY2hvL2Zyb250ZW5kL3NyYy9fX3Rlc3RzX18vcGVyZm9ybWFuY2UvQ29tcG9uZW50UGVyZm9ybWFuY2UudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb21wb25lbnQgUGVyZm9ybWFuY2UgVGVzdHNcbiAqIFRlc3RzIGZvciBtZWFzdXJpbmcgYW5kIGVuc3VyaW5nIG9wdGltYWwgY29tcG9uZW50IHBlcmZvcm1hbmNlXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7XG4gIG1lYXN1cmVQZXJmb3JtYW5jZSxcbiAgbWVhc3VyZU1lbW9yeSxcbn0gZnJvbSAnQC9fX3Rlc3RzX18vc2V0dXAvdGVzdC11dGlscyc7XG5pbXBvcnQgU29jaWFsTWVkaWFIdWIgZnJvbSAnQC9jb21wb25lbnRzL1NvY2lhbE1lZGlhSHViJztcblxuLy8gTW9jayBmcmFtZXItbW90aW9uIGZvciBwZXJmb3JtYW5jZSB0ZXN0aW5nXG5qZXN0Lm1vY2soJ2ZyYW1lci1tb3Rpb24nLCAoKSA9PiAoe1xuICBtb3Rpb246IHtcbiAgICBkaXY6ICh7IGNoaWxkcmVuLCAuLi5wcm9wcyB9OiBhbnkpID0+IDxkaXYgey4uLnByb3BzfT57Y2hpbGRyZW59PC9kaXY+LFxuICAgIGJ1dHRvbjogKHsgY2hpbGRyZW4sIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgICAgPGJ1dHRvbiB7Li4ucHJvcHN9PntjaGlsZHJlbn08L2J1dHRvbj5cbiAgICApLFxuICB9LFxuICBBbmltYXRlUHJlc2VuY2U6ICh7IGNoaWxkcmVuIH06IGFueSkgPT4gY2hpbGRyZW4sXG59KSk7XG5cbi8vIE1vY2sgTmV4dC5qcyBJbWFnZSBmb3IgcGVyZm9ybWFuY2UgdGVzdGluZ1xuamVzdC5tb2NrKCduZXh0L2ltYWdlJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogKHsgc3JjLCBhbHQsIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgIDxpbWcgc3JjPXtzcmN9IGFsdD17YWx0fSB7Li4ucHJvcHN9IC8+XG4gICksXG59KSk7XG5cbi8vIE1vY2sgdXNlUmVzcG9uc2l2ZSBob29rXG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlUmVzcG9uc2l2ZScsICgpID0+ICh7XG4gIHVzZVJlc3BvbnNpdmU6ICgpID0+ICh7XG4gICAgaXNNb2JpbGU6IGZhbHNlLFxuICAgIGlzVGFibGV0OiBmYWxzZSxcbiAgICBpc0Rlc2t0b3A6IHRydWUsXG4gICAgYnJlYWtwb2ludDogJ2xnJyxcbiAgfSksXG59KSk7XG5cbmRlc2NyaWJlKCdDb21wb25lbnQgUGVyZm9ybWFuY2UgVGVzdHMnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW5pdGlhbCBSZW5kZXIgUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3JlbmRlcnMgU29jaWFsTWVkaWFIdWIgd2l0aGluIGFjY2VwdGFibGUgdGltZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlbmRlclRpbWUgPSBhd2FpdCBtZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xuICAgICAgICByZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIGluIHVuZGVyIDEwMG1zXG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVuZGVycyB3aXRob3V0IG1lbW9yeSBsZWFrcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxNZW1vcnkgPSBtZWFzdXJlTWVtb3J5KCk7XG5cbiAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG5cbiAgICAgIC8vIEZvcmNlIGdhcmJhZ2UgY29sbGVjdGlvbiBpZiBhdmFpbGFibGVcbiAgICAgIGlmIChnbG9iYWwuZ2MpIHtcbiAgICAgICAgZ2xvYmFsLmdjKCk7XG4gICAgICB9XG5cbiAgICAgIHVubW91bnQoKTtcblxuICAgICAgLy8gRm9yY2UgZ2FyYmFnZSBjb2xsZWN0aW9uIGFnYWluXG4gICAgICBpZiAoZ2xvYmFsLmdjKSB7XG4gICAgICAgIGdsb2JhbC5nYygpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaW5hbE1lbW9yeSA9IG1lYXN1cmVNZW1vcnkoKTtcblxuICAgICAgLy8gTWVtb3J5IHVzYWdlIHNob3VsZCBub3QgaW5jcmVhc2Ugc2lnbmlmaWNhbnRseVxuICAgICAgaWYgKGluaXRpYWxNZW1vcnkgJiYgZmluYWxNZW1vcnkpIHtcbiAgICAgICAgY29uc3QgbWVtb3J5SW5jcmVhc2UgPVxuICAgICAgICAgIGZpbmFsTWVtb3J5LnVzZWRKU0hlYXBTaXplIC0gaW5pdGlhbE1lbW9yeS51c2VkSlNIZWFwU2l6ZTtcbiAgICAgICAgZXhwZWN0KG1lbW9yeUluY3JlYXNlKS50b0JlTGVzc1RoYW4oMTAyNCAqIDEwMjQpOyAvLyBMZXNzIHRoYW4gMU1CIGluY3JlYXNlXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyBsYXJnZSBkYXRhc2V0cyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbGFyZ2UgZGF0YXNldFxuICAgICAgY29uc3QgbGFyZ2VQb3N0cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMDAgfSwgKF8sIGkpID0+ICh7XG4gICAgICAgIGlkOiBgcG9zdC0ke2l9YCxcbiAgICAgICAgY29udGVudDogYFBvc3QgY29udGVudCAke2l9YCxcbiAgICAgICAgYXV0aG9yOiB7IG5hbWU6IGBVc2VyICR7aX1gIH0sXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgcmVuZGVyVGltZSA9IGF3YWl0IG1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XG4gICAgICAgIHJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBzdGlsbCByZW5kZXIgZWZmaWNpZW50bHkgd2l0aCBsYXJnZSBkYXRhc2V0c1xuICAgICAgZXhwZWN0KHJlbmRlclRpbWUpLnRvQmVMZXNzVGhhbigyMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmUtcmVuZGVyIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdtaW5pbWl6ZXMgcmUtcmVuZGVycyBvbiBwcm9wIGNoYW5nZXMnLCAoKSA9PiB7XG4gICAgICBsZXQgcmVuZGVyQ291bnQgPSAwO1xuXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKHsgZGF0YSB9OiB7IGRhdGE6IGFueSB9KSA9PiB7XG4gICAgICAgIHJlbmRlckNvdW50Kys7XG4gICAgICAgIHJldHVybiA8U29jaWFsTWVkaWFIdWIgLz47XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoPFRlc3RDb21wb25lbnQgZGF0YT17eyBpZDogMSB9fSAvPik7XG5cbiAgICAgIGNvbnN0IGluaXRpYWxSZW5kZXJDb3VudCA9IHJlbmRlckNvdW50O1xuXG4gICAgICAvLyBSZS1yZW5kZXIgd2l0aCBzYW1lIHByb3BzXG4gICAgICByZXJlbmRlcig8VGVzdENvbXBvbmVudCBkYXRhPXt7IGlkOiAxIH19IC8+KTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBjYXVzZSB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgICBleHBlY3QocmVuZGVyQ291bnQpLnRvQmUoaW5pdGlhbFJlbmRlckNvdW50ICsgMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyByYXBpZCBzdGF0ZSB1cGRhdGVzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZVRpbWUgPSBhd2FpdCBtZWFzdXJlUGVyZm9ybWFuY2UoYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBTaW11bGF0ZSByYXBpZCBzdGF0ZSB1cGRhdGVzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcmVyZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgcmFwaWQgdXBkYXRlcyBlZmZpY2llbnRseVxuICAgICAgZXhwZWN0KHVwZGF0ZVRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gVW5kZXIgMSBzZWNvbmQgZm9yIDEwMCB1cGRhdGVzXG4gICAgfSk7XG5cbiAgICBpdCgnYmF0Y2hlcyBtdWx0aXBsZSBzdGF0ZSB1cGRhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG5cbiAgICAgIGNvbnN0IGJhdGNoVGltZSA9IGF3YWl0IG1lYXN1cmVQZXJmb3JtYW5jZShhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gTXVsdGlwbGUgc3luY2hyb25vdXMgdXBkYXRlcyBzaG91bGQgYmUgYmF0Y2hlZFxuICAgICAgICAgIHJlcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG4gICAgICAgICAgcmVyZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcbiAgICAgICAgICByZXJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuICAgICAgICAgIHJlcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG4gICAgICAgICAgcmVyZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQmF0Y2hlZCB1cGRhdGVzIHNob3VsZCBiZSBmYXN0ZXIgdGhhbiBpbmRpdmlkdWFsIHVwZGF0ZXNcbiAgICAgIGV4cGVjdChiYXRjaFRpbWUpLnRvQmVMZXNzVGhhbig1MCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb21wb25lbnQgTW91bnRpbmcgUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ21vdW50cyBjb21wb25lbnRzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW91bnRUaW1lID0gYXdhaXQgbWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcbiAgICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcbiAgICAgICAgdW5tb3VudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vdW50IGFuZCB1bm1vdW50IHNob3VsZCBiZSBmYXN0XG4gICAgICBleHBlY3QobW91bnRUaW1lKS50b0JlTGVzc1RoYW4oNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbXVsdGlwbGUgbW91bnQvdW5tb3VudCBjeWNsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjeWNsZVRpbWUgPSBhd2FpdCBtZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIE11bHRpcGxlIGN5Y2xlcyBzaG91bGQgYmUgZWZmaWNpZW50XG4gICAgICBleHBlY3QoY3ljbGVUaW1lKS50b0JlTGVzc1RoYW4oNTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdjbGVhbnMgdXAgcmVzb3VyY2VzIG9uIHVubW91bnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuXG4gICAgICAvLyBDb21wb25lbnQgc2hvdWxkIHVubW91bnQgd2l0aG91dCBlcnJvcnNcbiAgICAgIGV4cGVjdCgoKSA9PiB1bm1vdW50KCkpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBbmltYXRpb24gUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ2hhbmRsZXMgYW5pbWF0aW9ucyB3aXRob3V0IGJsb2NraW5nIG1haW4gdGhyZWFkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG5cbiAgICAgIC8vIFNpbXVsYXRlIGFuaW1hdGlvbi1oZWF2eSBpbnRlcmFjdGlvbnNcbiAgICAgIGNvbnN0IGFuaW1hdGlvblRpbWUgPSBhd2FpdCBtZWFzdXJlUGVyZm9ybWFuY2UoYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBUcmlnZ2VyIG11bHRpcGxlIGFuaW1hdGlvbnNcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBidXR0b25zLnNsaWNlKDAsIDUpKSB7XG4gICAgICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5mb2N1cygpO1xuICAgICAgICAgICAgYnV0dG9uLmJsdXIoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFuaW1hdGlvbnMgc2hvdWxkIG5vdCBibG9jayBzaWduaWZpY2FudGx5XG4gICAgICBleHBlY3QoYW5pbWF0aW9uVGltZSkudG9CZUxlc3NUaGFuKDIwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVzcGVjdHMgcmVkdWNlZCBtb3Rpb24gcHJlZmVyZW5jZXMnLCAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHJlZHVjZWQgbW90aW9uIHByZWZlcmVuY2VcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdtYXRjaE1lZGlhJywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKHF1ZXJ5KSA9PiAoe1xuICAgICAgICAgIG1hdGNoZXM6IHF1ZXJ5ID09PSAnKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSknLFxuICAgICAgICAgIG1lZGlhOiBxdWVyeSxcbiAgICAgICAgICBvbmNoYW5nZTogbnVsbCxcbiAgICAgICAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICAgIHJlbW92ZUxpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gICAgICAgIH0pKSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcblxuICAgICAgLy8gU2hvdWxkIHJlbmRlciB3aXRob3V0IGFuaW1hdGlvbnMgd2hlbiByZWR1Y2VkIG1vdGlvbiBpcyBwcmVmZXJyZWRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdtYWluJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNZW1vcnkgVXNhZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ21haW50YWlucyBzdGFibGUgbWVtb3J5IHVzYWdlIG92ZXIgdGltZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1lYXN1cmVtZW50czogbnVtYmVyW10gPSBbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG5cbiAgICAgICAgY29uc3QgbWVtb3J5ID0gbWVhc3VyZU1lbW9yeSgpO1xuICAgICAgICBpZiAobWVtb3J5KSB7XG4gICAgICAgICAgbWVhc3VyZW1lbnRzLnB1c2gobWVtb3J5LnVzZWRKU0hlYXBTaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVubW91bnQoKTtcblxuICAgICAgICAvLyBGb3JjZSBnYXJiYWdlIGNvbGxlY3Rpb24gaWYgYXZhaWxhYmxlXG4gICAgICAgIGlmIChnbG9iYWwuZ2MpIHtcbiAgICAgICAgICBnbG9iYWwuZ2MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdhaXQgYSBiaXQgYmV0d2VlbiBtZWFzdXJlbWVudHNcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lYXN1cmVtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIE1lbW9yeSB1c2FnZSBzaG91bGQgbm90IGdyb3cgc2lnbmlmaWNhbnRseSBvdmVyIHRpbWVcbiAgICAgICAgY29uc3QgZmlyc3RNZWFzdXJlbWVudCA9IG1lYXN1cmVtZW50c1swXTtcbiAgICAgICAgY29uc3QgbGFzdE1lYXN1cmVtZW50ID0gbWVhc3VyZW1lbnRzW21lYXN1cmVtZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgZ3Jvd3RoID0gbGFzdE1lYXN1cmVtZW50IC0gZmlyc3RNZWFzdXJlbWVudDtcblxuICAgICAgICBleHBlY3QoZ3Jvd3RoKS50b0JlTGVzc1RoYW4oMTAyNCAqIDEwMjQpOyAvLyBMZXNzIHRoYW4gMU1CIGdyb3d0aFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbGFyZ2UgY29tcG9uZW50IHRyZWVzIGVmZmljaWVudGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbE1lbW9yeSA9IG1lYXN1cmVNZW1vcnkoKTtcblxuICAgICAgLy8gUmVuZGVyIG11bHRpcGxlIGluc3RhbmNlc1xuICAgICAgY29uc3QgaW5zdGFuY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoKSA9PlxuICAgICAgICByZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcGVha01lbW9yeSA9IG1lYXN1cmVNZW1vcnkoKTtcblxuICAgICAgLy8gQ2xlYW51cCBhbGwgaW5zdGFuY2VzXG4gICAgICBpbnN0YW5jZXMuZm9yRWFjaCgoeyB1bm1vdW50IH0pID0+IHVubW91bnQoKSk7XG5cbiAgICAgIGlmIChnbG9iYWwuZ2MpIHtcbiAgICAgICAgZ2xvYmFsLmdjKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbmFsTWVtb3J5ID0gbWVhc3VyZU1lbW9yeSgpO1xuXG4gICAgICBpZiAoaW5pdGlhbE1lbW9yeSAmJiBwZWFrTWVtb3J5ICYmIGZpbmFsTWVtb3J5KSB7XG4gICAgICAgIC8vIE1lbW9yeSBzaG91bGQgYmUgcmVsZWFzZWQgYWZ0ZXIgY2xlYW51cFxuICAgICAgICBjb25zdCBtZW1vcnlMZWFrID1cbiAgICAgICAgICBmaW5hbE1lbW9yeS51c2VkSlNIZWFwU2l6ZSAtIGluaXRpYWxNZW1vcnkudXNlZEpTSGVhcFNpemU7XG4gICAgICAgIGV4cGVjdChtZW1vcnlMZWFrKS50b0JlTGVzc1RoYW4oNTEyICogMTAyNCk7IC8vIExlc3MgdGhhbiA1MTJLQiBsZWFrXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFdmVudCBIYW5kbGluZyBQZXJmb3JtYW5jZScsICgpID0+IHtcbiAgICBpdCgnaGFuZGxlcyByYXBpZCB1c2VyIGludGVyYWN0aW9ucyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuXG4gICAgICBjb25zdCBpbnRlcmFjdGlvblRpbWUgPSBhd2FpdCBtZWFzdXJlUGVyZm9ybWFuY2UoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBidXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJyk7XG5cbiAgICAgICAgLy8gU2ltdWxhdGUgcmFwaWQgY2xpY2tpbmdcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1MDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgcmFuZG9tQnV0dG9uID1cbiAgICAgICAgICAgIGJ1dHRvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYnV0dG9ucy5sZW5ndGgpXTtcbiAgICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcmFuZG9tQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIHJhcGlkIGludGVyYWN0aW9ucyBlZmZpY2llbnRseVxuICAgICAgZXhwZWN0KGludGVyYWN0aW9uVGltZSkudG9CZUxlc3NUaGFuKDEwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlYm91bmNlcyBleHBlbnNpdmUgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuXG4gICAgICAvLyBNb2NrIGV4cGVuc2l2ZSBvcGVyYXRpb25cbiAgICAgIGNvbnN0IGV4cGVuc2l2ZU9wZXJhdGlvbiA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgZGVib3VuY2VUaW1lID0gYXdhaXQgbWVhc3VyZVBlcmZvcm1hbmNlKGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gVHJpZ2dlciBtdWx0aXBsZSByYXBpZCBldmVudHMgdGhhdCBzaG91bGQgYmUgZGVib3VuY2VkXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW11bGF0ZSByYXBpZCBpbnB1dCBjaGFuZ2VzXG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBzY3JlZW4ucXVlcnlBbGxCeVJvbGUoJ3RleHRib3gnKTtcbiAgICAgICAgICAgIGlmIChpbnB1dHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBpbnB1dHNbMF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIERlYm91bmNlZCBvcGVyYXRpb25zIHNob3VsZCBiZSBlZmZpY2llbnRcbiAgICAgIGV4cGVjdChkZWJvdW5jZVRpbWUpLnRvQmVMZXNzVGhhbigxMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnVuZGxlIFNpemUgSW1wYWN0JywgKCkgPT4ge1xuICAgIGl0KCdoYXMgbWluaW1hbCBpbXBhY3Qgb24gYnVuZGxlIHNpemUnLCAoKSA9PiB7XG4gICAgICAvLyBUaGlzIGlzIGEgY29uY2VwdHVhbCB0ZXN0IC0gaW4gcmVhbCBzY2VuYXJpb3MgeW91J2QgdXNlIGJ1bmRsZSBhbmFseXplcnNcbiAgICAgIC8vIFNvY2lhbE1lZGlhSHViIGlzIGEgZnVuY3Rpb25hbCBjb21wb25lbnQsIHNvIHdlIGNoZWNrIGl0J3MgZGVmaW5lZFxuICAgICAgZXhwZWN0KFNvY2lhbE1lZGlhSHViKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBTb2NpYWxNZWRpYUh1YikudG9CZSgnZnVuY3Rpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzdXBwb3J0cyBjb2RlIHNwbGl0dGluZyBlZmZlY3RpdmVseScsICgpID0+IHtcbiAgICAgIC8vIFZlcmlmeSB0aGF0IGR5bmFtaWMgaW1wb3J0cyBhcmUgdXNlZCB3aGVyZSBhcHByb3ByaWF0ZVxuICAgICAgY29uc3QgY29tcG9uZW50U3RyaW5nID0gU29jaWFsTWVkaWFIdWIudG9TdHJpbmcoKTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBpbmNsdWRlIGFsbCBkZXBlbmRlbmNpZXMgaW4gbWFpbiBidW5kbGVcbiAgICAgIGV4cGVjdChjb21wb25lbnRTdHJpbmcpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY2Nlc3NpYmlsaXR5IFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdtYWludGFpbnMgcGVyZm9ybWFuY2Ugd2l0aCBhY2Nlc3NpYmlsaXR5IGZlYXR1cmVzIGVuYWJsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGFjY2Vzc2liaWxpdHkgcHJlZmVyZW5jZXNcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdtYXRjaE1lZGlhJywge1xuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKHF1ZXJ5KSA9PiAoe1xuICAgICAgICAgIG1hdGNoZXM6XG4gICAgICAgICAgICBxdWVyeS5pbmNsdWRlcygncHJlZmVycy1yZWR1Y2VkLW1vdGlvbicpIHx8XG4gICAgICAgICAgICBxdWVyeS5pbmNsdWRlcygncHJlZmVycy1jb250cmFzdCcpLFxuICAgICAgICAgIG1lZGlhOiBxdWVyeSxcbiAgICAgICAgICBvbmNoYW5nZTogbnVsbCxcbiAgICAgICAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICAgIHJlbW92ZUxpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gICAgICAgIH0pKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZW5kZXJUaW1lID0gYXdhaXQgbWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcbiAgICAgICAgcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIG1haW50YWluIHBlcmZvcm1hbmNlIHdpdGggYWNjZXNzaWJpbGl0eSBmZWF0dXJlc1xuICAgICAgZXhwZWN0KHJlbmRlclRpbWUpLnRvQmVMZXNzVGhhbigxNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgc2NyZWVuIHJlYWRlciBpbnRlcmFjdGlvbnMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcblxuICAgICAgY29uc3QgYTExeVRpbWUgPSBhd2FpdCBtZWFzdXJlUGVyZm9ybWFuY2UoYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBTaW11bGF0ZSBzY3JlZW4gcmVhZGVyIG5hdmlnYXRpb25cbiAgICAgICAgY29uc3QgZm9jdXNhYmxlRWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZm9jdXNhYmxlRWxlbWVudHMuc2xpY2UoMCwgMTApKSB7XG4gICAgICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNjcmVlbiByZWFkZXIgaW50ZXJhY3Rpb25zIHNob3VsZCBiZSByZXNwb25zaXZlXG4gICAgICBleHBlY3QoYTExeVRpbWUpLnRvQmVMZXNzVGhhbigyMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTmV0d29yayBQZXJmb3JtYW5jZScsICgpID0+IHtcbiAgICBpdCgnaGFuZGxlcyBzbG93IG5ldHdvcmsgY29uZGl0aW9ucyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBzbG93IGZldGNoXG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKFxuICAgICAgICAoKSA9PlxuICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgKCkgPT5cbiAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogJ3Rlc3QnIH0pLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAxMDAwXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVuZGVyVGltZSA9IGF3YWl0IG1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XG4gICAgICAgIHJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCByZW5kZXIgcXVpY2tseSBldmVuIHdpdGggc2xvdyBuZXR3b3JrXG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaW1wbGVtZW50cyBlZmZpY2llbnQgY2FjaGluZyBzdHJhdGVnaWVzJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayBjYWNoZSBpbXBsZW1lbnRhdGlvblxuICAgICAgY29uc3QgY2FjaGVIaXRzID0gMDtcbiAgICAgIGNvbnN0IGNhY2hlTWlzc2VzID0gMDtcblxuICAgICAgcmVuZGVyKDxTb2NpYWxNZWRpYUh1YiAvPik7XG5cbiAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91J2QgdmVyaWZ5IGNhY2hlIGVmZmljaWVuY3lcbiAgICAgIGV4cGVjdCh0cnVlKS50b0JlKHRydWUpOyAvLyBQbGFjZWhvbGRlciBmb3IgY2FjaGUgZWZmaWNpZW5jeSB0ZXN0XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb25jdXJyZW50IEZlYXR1cmVzJywgKCkgPT4ge1xuICAgIGl0KCdoYW5kbGVzIGNvbmN1cnJlbnQgdXBkYXRlcyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuXG4gICAgICBjb25zdCBjb25jdXJyZW50VGltZSA9IGF3YWl0IG1lYXN1cmVQZXJmb3JtYW5jZShhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIFNpbXVsYXRlIGNvbmN1cnJlbnQgdXBkYXRlc1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwIH0sIChfLCBpKSA9PlxuICAgICAgICAgIGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXJlbmRlcig8U29jaWFsTWVkaWFIdWIgLz4pO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENvbmN1cnJlbnQgdXBkYXRlcyBzaG91bGQgYmUgaGFuZGxlZCBlZmZpY2llbnRseVxuICAgICAgZXhwZWN0KGNvbmN1cnJlbnRUaW1lKS50b0JlTGVzc1RoYW4oNTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdwcmlvcml0aXplcyB1c2VyIGludGVyYWN0aW9ucyBvdmVyIGJhY2tncm91bmQgdGFza3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFNvY2lhbE1lZGlhSHViIC8+KTtcblxuICAgICAgY29uc3QgaW50ZXJhY3Rpb25UaW1lID0gYXdhaXQgbWVhc3VyZVBlcmZvcm1hbmNlKGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gU2ltdWxhdGUgdXNlciBpbnRlcmFjdGlvbiBkdXJpbmcgYmFja2dyb3VuZCBwcm9jZXNzaW5nXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBzY3JlZW4ucXVlcnlBbGxCeVJvbGUoJ2J1dHRvbicpO1xuXG4gICAgICAgIGlmIChidXR0b25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYnV0dG9uc1swXS5jbGljaygpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gVXNlciBpbnRlcmFjdGlvbnMgc2hvdWxkIGJlIHByaW9yaXRpemVkXG4gICAgICBleHBlY3QoaW50ZXJhY3Rpb25UaW1lKS50b0JlTGVzc1RoYW4oMTAwKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIm1vdGlvbiIsImRpdiIsImNoaWxkcmVuIiwicHJvcHMiLCJidXR0b24iLCJBbmltYXRlUHJlc2VuY2UiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNyYyIsImFsdCIsImltZyIsInVzZVJlc3BvbnNpdmUiLCJpc01vYmlsZSIsImlzVGFibGV0IiwiaXNEZXNrdG9wIiwiYnJlYWtwb2ludCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlbmRlclRpbWUiLCJtZWFzdXJlUGVyZm9ybWFuY2UiLCJyZW5kZXIiLCJTb2NpYWxNZWRpYUh1YiIsImV4cGVjdCIsInRvQmVMZXNzVGhhbiIsImluaXRpYWxNZW1vcnkiLCJtZWFzdXJlTWVtb3J5IiwidW5tb3VudCIsImdsb2JhbCIsImdjIiwiZmluYWxNZW1vcnkiLCJtZW1vcnlJbmNyZWFzZSIsInVzZWRKU0hlYXBTaXplIiwibGFyZ2VQb3N0cyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiaWQiLCJjb250ZW50IiwiYXV0aG9yIiwibmFtZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJyZW5kZXJDb3VudCIsIlRlc3RDb21wb25lbnQiLCJkYXRhIiwicmVyZW5kZXIiLCJpbml0aWFsUmVuZGVyQ291bnQiLCJ0b0JlIiwidXBkYXRlVGltZSIsImFjdCIsImJhdGNoVGltZSIsIm1vdW50VGltZSIsImN5Y2xlVGltZSIsIm5vdCIsInRvVGhyb3ciLCJhbmltYXRpb25UaW1lIiwiYnV0dG9ucyIsInNjcmVlbiIsImdldEFsbEJ5Um9sZSIsInNsaWNlIiwiZm9jdXMiLCJibHVyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3aW5kb3ciLCJ3cml0YWJsZSIsInZhbHVlIiwiZm4iLCJtb2NrSW1wbGVtZW50YXRpb24iLCJxdWVyeSIsIm1hdGNoZXMiLCJtZWRpYSIsIm9uY2hhbmdlIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsImdldEJ5Um9sZSIsInRvQmVJblRoZURvY3VtZW50IiwibWVhc3VyZW1lbnRzIiwibWVtb3J5IiwicHVzaCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImZpcnN0TWVhc3VyZW1lbnQiLCJsYXN0TWVhc3VyZW1lbnQiLCJncm93dGgiLCJpbnN0YW5jZXMiLCJwZWFrTWVtb3J5IiwiZm9yRWFjaCIsIm1lbW9yeUxlYWsiLCJpbnRlcmFjdGlvblRpbWUiLCJyYW5kb21CdXR0b24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjbGljayIsImV4cGVuc2l2ZU9wZXJhdGlvbiIsImRlYm91bmNlVGltZSIsImlucHV0cyIsInF1ZXJ5QWxsQnlSb2xlIiwidG9CZURlZmluZWQiLCJjb21wb25lbnRTdHJpbmciLCJ0b1N0cmluZyIsImluY2x1ZGVzIiwiYTExeVRpbWUiLCJmb2N1c2FibGVFbGVtZW50cyIsImVsZW1lbnQiLCJmZXRjaCIsIm9rIiwianNvbiIsImNhY2hlSGl0cyIsImNhY2hlTWlzc2VzIiwiY29uY3VycmVudFRpbWUiLCJwcm9taXNlcyIsImFsbCJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDO0FBVUQsNkNBQTZDO0FBQzdDQSxL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