{"version":3,"sources":["/home/runner/work/echo/echo/frontend/jest.setup.js"],"sourcesContent":["import '@testing-library/jest-dom';\nimport { act } from 'react';\n\n// Configure React Testing Library to use React 18's automatic batching\nglobal.IS_REACT_ACT_ENVIRONMENT = true;\n\n// Suppress specific React warnings but allow real errors\nconst originalError = console.error;\nbeforeAll(() => {\n  console.error = (...args) => {\n    if (\n      typeof args[0] === 'string' &&\n      (args[0].includes('Warning: ReactDOM.render is no longer supported') ||\n        args[0].includes('Warning: An invalid form control') ||\n        args[0].includes('Warning: React.jsx: type is invalid') ||\n        args[0].includes('The above error occurred') ||\n        args[0].includes('was not wrapped in act') ||\n        args[0].includes('overlapping act() calls'))\n    ) {\n      return;\n    }\n    originalError.call(console, ...args);\n  };\n});\n\nafterAll(() => {\n  console.error = originalError;\n});\n\n// Helper to ensure all updates are flushed\nglobal.flushPromises = () => act(() => new Promise(resolve => setImmediate(resolve)));\n\n// Helper for tests that need to wait for async updates\nglobal.waitForAsync = async () => {\n  await act(async () => {\n    await new Promise(resolve => setTimeout(resolve, 0));\n  });\n};\n\n// Mock framer-motion globally\njest.mock('framer-motion', () => {\n  const createMotionComponent =\n    (tag) =>\n    ({ children, ...props }) => {\n      const {\n        animate,\n        initial,\n        transition,\n        whileHover,\n        whileTap,\n        whileInView,\n        variants,\n        ...restProps\n      } = props;\n      return React.createElement(tag, restProps, children);\n    };\n\n  return {\n    motion: {\n      div: createMotionComponent('div'),\n      p: createMotionComponent('p'),\n      span: createMotionComponent('span'),\n      button: createMotionComponent('button'),\n      li: createMotionComponent('li'),\n      ul: createMotionComponent('ul'),\n      h1: createMotionComponent('h1'),\n      h2: createMotionComponent('h2'),\n      h3: createMotionComponent('h3'),\n      h4: createMotionComponent('h4'),\n      h5: createMotionComponent('h5'),\n      h6: createMotionComponent('h6'),\n      a: createMotionComponent('a'),\n      img: createMotionComponent('img'),\n      section: createMotionComponent('section'),\n      article: createMotionComponent('article'),\n      header: createMotionComponent('header'),\n      footer: createMotionComponent('footer'),\n      nav: createMotionComponent('nav'),\n      main: createMotionComponent('main'),\n      aside: createMotionComponent('aside'),\n      form: createMotionComponent('form'),\n      input: createMotionComponent('input'),\n      textarea: createMotionComponent('textarea'),\n      select: createMotionComponent('select'),\n      label: createMotionComponent('label'),\n    },\n    AnimatePresence: ({ children }) => children,\n    useAnimation: () => ({\n      start: jest.fn(),\n      stop: jest.fn(),\n      set: jest.fn(),\n    }),\n    useMotionValue: () => ({ get: jest.fn(), set: jest.fn() }),\n    useTransform: () => ({ get: jest.fn(), set: jest.fn() }),\n    useSpring: () => ({ get: jest.fn(), set: jest.fn() }),\n  };\n});\n\n// Mock browser APIs\n// Mock window.alert to prevent \"Not implemented\" errors in tests\nglobal.alert = jest.fn();\n\nglobal.ClipboardEvent = class ClipboardEvent extends Event {\n  constructor(type, eventInitDict = {}) {\n    super(type, eventInitDict);\n    this.clipboardData = eventInitDict.clipboardData || {\n      getData: jest.fn(),\n      setData: jest.fn(),\n    };\n  }\n};\n\nglobal.DataTransfer = class DataTransfer {\n  constructor() {\n    this.data = {};\n  }\n\n  getData(format) {\n    return this.data[format] || '';\n  }\n\n  setData(format, data) {\n    this.data[format] = data;\n  }\n};\n\n// Mock IntersectionObserver\nglobal.IntersectionObserver = class IntersectionObserver {\n  constructor() {}\n  disconnect() {}\n  observe() {}\n  unobserve() {}\n};\n\n// Mock ResizeObserver\nglobal.ResizeObserver = class ResizeObserver {\n  constructor() {}\n  disconnect() {}\n  observe() {}\n  unobserve() {}\n};\n\n// Mock matchMedia\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: jest.fn().mockImplementation((query) => ({\n    matches: false,\n    media: query,\n    onchange: null,\n    addListener: jest.fn(), // deprecated\n    removeListener: jest.fn(), // deprecated\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    dispatchEvent: jest.fn(),\n  })),\n});\n\n// Mock navigator.geolocation\nconst mockGeolocation = {\n  getCurrentPosition: jest.fn(),\n  watchPosition: jest.fn(),\n  clearWatch: jest.fn(),\n};\n\nObject.defineProperty(navigator, 'geolocation', {\n  value: mockGeolocation,\n  writable: true,\n});\n\n// Make React available globally for JSX in mocks\nglobal.React = require('react');\n\n// Mock context hooks to avoid provider requirements in tests\njest.mock('@/contexts/ThemeContext', () => ({\n  useTheme: () => ({\n    theme: 'nothing',\n    colorMode: 'light',\n    actualColorMode: 'light',\n    colorPalette: 'mono',\n    accentColor: '#007aff',\n    accessibilityPrefs: {\n      reducedMotion: false,\n      highContrast: false,\n      forcedColors: false,\n    },\n    themeSchedule: { type: 'off' },\n    isTransitioning: false,\n    setTheme: jest.fn(),\n    setColorMode: jest.fn(),\n    setColorPalette: jest.fn(),\n    setAccentColor: jest.fn(),\n    setAccessibilityPrefs: jest.fn(),\n    setThemeSchedule: jest.fn(),\n    toggleColorMode: jest.fn(),\n    previewTheme: jest.fn(),\n    getColors: () => ({\n      primary: '#FFFFFF',\n      secondary: '#F2F2F7',\n      accent: '#E5E5EA',\n    }),\n    getSystemPreference: () => 'light',\n    getSunriseSunset: () =>\n      Promise.resolve({ sunrise: '06:00', sunset: '18:00' }),\n  }),\n  ThemeProvider: ({ children }) => children,\n}));\n\njest.mock('@/contexts/LanguageContext', () => ({\n  useLanguage: () => ({\n    language: 'en',\n    setLanguage: jest.fn(),\n    t: (key) => key, // Simple pass-through for translation keys\n    isRTL: false,\n    supportedLanguages: {\n      en: { name: 'English', nativeName: 'English' },\n      es: { name: 'Spanish', nativeName: 'Español' },\n      fr: { name: 'French', nativeName: 'Français' },\n    },\n  }),\n  LanguageProvider: ({ children }) => children,\n}));\n"],"names":["jest","mock","createMotionComponent","tag","children","props","animate","initial","transition","whileHover","whileTap","whileInView","variants","restProps","React","createElement","motion","div","p","span","button","li","ul","h1","h2","h3","h4","h5","h6","a","img","section","article","header","footer","nav","main","aside","form","input","textarea","select","label","AnimatePresence","useAnimation","start","fn","stop","set","useMotionValue","get","useTransform","useSpring","useTheme","theme","colorMode","actualColorMode","colorPalette","accentColor","accessibilityPrefs","reducedMotion","highContrast","forcedColors","themeSchedule","type","isTransitioning","setTheme","setColorMode","setColorPalette","setAccentColor","setAccessibilityPrefs","setThemeSchedule","toggleColorMode","previewTheme","getColors","primary","secondary","accent","getSystemPreference","getSunriseSunset","Promise","resolve","sunrise","sunset","ThemeProvider","useLanguage","language","setLanguage","t","key","isRTL","supportedLanguages","en","name","nativeName","es","fr","LanguageProvider","global","IS_REACT_ACT_ENVIRONMENT","originalError","console","error","beforeAll","args","includes","call","afterAll","flushPromises","act","setImmediate","waitForAsync","setTimeout","alert","ClipboardEvent","Event","eventInitDict","clipboardData","getData","setData","DataTransfer","data","format","IntersectionObserver","disconnect","observe","unobserve","ResizeObserver","Object","defineProperty","window","writable","value","mockImplementation","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","mockGeolocation","getCurrentPosition","watchPosition","clearWatch","navigator","require"],"mappings":"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"}