248f28c820d7cdc24c4095bb33634162
/**
 * Theme Management Utilities
 * Enhanced utilities for theme management, accessibility, and user preferences
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get ACCESSIBILITY_PRESETS () {
        return ACCESSIBILITY_PRESETS;
    },
    get THEME_PRESETS () {
        return THEME_PRESETS;
    },
    get detectSystemPreferences () {
        return detectSystemPreferences;
    },
    get exportThemeConfig () {
        return exportThemeConfig;
    },
    get generateThemeCSS () {
        return generateThemeCSS;
    },
    get getContrastRatio () {
        return getContrastRatio;
    },
    get getCurrentLocation () {
        return getCurrentLocation;
    },
    get getSunriseSunset () {
        return getSunriseSunset;
    },
    get importThemeConfig () {
        return importThemeConfig;
    },
    get meetsAccessibilityStandards () {
        return meetsAccessibilityStandards;
    },
    get shouldUseDarkModeBySchedule () {
        return shouldUseDarkModeBySchedule;
    },
    get validateThemeConfig () {
        return validateThemeConfig;
    }
});
const THEME_PRESETS = [
    {
        id: 'auto',
        name: 'Auto',
        description: 'Follows your system preference',
        colorMode: 'auto',
        palette: 'mono',
        accentColor: '#007aff',
        preview: {
            background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',
            foreground: '#1e293b',
            accent: '#007aff'
        }
    },
    {
        id: 'light',
        name: 'Light',
        description: 'Clean and bright interface',
        colorMode: 'light',
        palette: 'mono',
        accentColor: '#007aff',
        preview: {
            background: '#ffffff',
            foreground: '#1e293b',
            accent: '#007aff'
        }
    },
    {
        id: 'dark',
        name: 'Dark',
        description: 'Easy on the eyes in low light',
        colorMode: 'dark',
        palette: 'dark',
        accentColor: '#60a5fa',
        preview: {
            background: '#0f172a',
            foreground: '#f8fafc',
            accent: '#60a5fa'
        }
    },
    {
        id: 'blue',
        name: 'Ocean Blue',
        description: 'Calming blue tones',
        colorMode: 'light',
        palette: 'blue',
        accentColor: '#3b82f6',
        preview: {
            background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',
            foreground: '#1e3a8a',
            accent: '#3b82f6'
        }
    },
    {
        id: 'green',
        name: 'Nature Green',
        description: 'Fresh and natural',
        colorMode: 'light',
        palette: 'green',
        accentColor: '#10b981',
        preview: {
            background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',
            foreground: '#064e3b',
            accent: '#10b981'
        }
    },
    {
        id: 'red',
        name: 'Nothing Red',
        description: 'Bold Nothing Phone style',
        colorMode: 'light',
        palette: 'red',
        accentColor: '#ef4444',
        preview: {
            background: 'linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)',
            foreground: '#7f1d1d',
            accent: '#ef4444'
        }
    }
];
const ACCESSIBILITY_PRESETS = {
    default: {
        reducedMotion: false,
        highContrast: false,
        forcedColors: false,
        fontSize: 'medium',
        focusIndicators: 'subtle'
    },
    accessible: {
        reducedMotion: true,
        highContrast: true,
        forcedColors: false,
        fontSize: 'large',
        focusIndicators: 'prominent'
    },
    lowVision: {
        reducedMotion: true,
        highContrast: true,
        forcedColors: true,
        fontSize: 'xl',
        focusIndicators: 'prominent'
    }
};
function detectSystemPreferences() {
    if (typeof window === 'undefined') {
        return {
            colorScheme: 'light',
            reducedMotion: false,
            highContrast: false,
            forcedColors: false
        };
    }
    return {
        colorScheme: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light',
        reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,
        highContrast: window.matchMedia('(prefers-contrast: high)').matches,
        forcedColors: window.matchMedia('(forced-colors: active)').matches
    };
}
async function getSunriseSunset(lat, lng, date) {
    try {
        const targetDate = date || new Date();
        const dateStr = targetDate.toISOString().split('T')[0];
        const response = await fetch(`https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lng}&date=${dateStr}&formatted=0`);
        if (!response.ok) throw new Error('Failed to fetch sunrise/sunset data');
        const data = await response.json();
        if (data.status !== 'OK') throw new Error('Invalid sunrise/sunset response');
        return {
            sunrise: new Date(data.results.sunrise),
            sunset: new Date(data.results.sunset)
        };
    } catch (error) {
        console.warn('Failed to fetch sunrise/sunset times:', error);
        return null;
    }
}
function getCurrentLocation() {
    return new Promise((resolve, reject)=>{
        if (!navigator.geolocation) {
            reject(new Error('Geolocation is not supported'));
            return;
        }
        navigator.geolocation.getCurrentPosition(async (position)=>{
            const { latitude: lat, longitude: lng } = position.coords;
            try {
                // Try to get location name using reverse geocoding
                const response = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=en`);
                if (response.ok) {
                    const data = await response.json();
                    const name = data.city || data.locality || data.countryName || 'Unknown Location';
                    resolve({
                        lat,
                        lng,
                        name
                    });
                } else {
                    resolve({
                        lat,
                        lng
                    });
                }
            } catch (error) {
                resolve({
                    lat,
                    lng
                });
            }
        }, (error)=>{
            reject(error);
        }, {
            enableHighAccuracy: false,
            timeout: 10000,
            maximumAge: 300000
        });
    });
}
function shouldUseDarkModeBySchedule(schedule, currentTime = new Date()) {
    if (!schedule.enabled || schedule.type === 'off') {
        return false;
    }
    const hours = currentTime.getHours();
    const minutes = currentTime.getMinutes();
    const currentMinutes = hours * 60 + minutes;
    if (schedule.type === 'time' && schedule.lightTime && schedule.darkTime) {
        const [lightHour, lightMin] = schedule.lightTime.split(':').map(Number);
        const [darkHour, darkMin] = schedule.darkTime.split(':').map(Number);
        const lightMinutes = lightHour * 60 + lightMin;
        const darkMinutes = darkHour * 60 + darkMin;
        if (lightMinutes > darkMinutes) {
            // Normal day (light time is after dark time)
            // Dark period: from darkTime to lightTime
            return currentMinutes >= darkMinutes && currentMinutes < lightMinutes;
        } else {
            // Overnight (light time is before dark time)
            // Light period: from lightTime to darkTime (crossing midnight)
            // Dark period: from darkTime to lightTime (next day)
            return currentMinutes >= darkMinutes || currentMinutes < lightMinutes;
        }
    }
    // For sunset/location-based scheduling, this would need to be implemented
    // with actual sunrise/sunset calculation
    return false;
}
function validateThemeConfig(config) {
    try {
        if (!config || typeof config !== 'object') return false;
        // Check required properties
        if (![
            'light',
            'dark',
            'auto'
        ].includes(config.colorMode)) return false;
        if (typeof config.accentColor !== 'string') return false;
        if (typeof config.palette !== 'string') return false;
        // Validate hex color
        if (!/^#[0-9A-F]{6}$/i.test(config.accentColor)) return false;
        return true;
    } catch (error) {
        return false;
    }
}
function exportThemeConfig(theme) {
    const config = {
        version: '1.0',
        timestamp: new Date().toISOString(),
        theme: {
            colorMode: theme.colorMode,
            palette: theme.colorPalette,
            accentColor: theme.accentColor,
            accessibilityPrefs: theme.accessibilityPrefs,
            themeSchedule: theme.themeSchedule
        }
    };
    return JSON.stringify(config, null, 2);
}
function importThemeConfig(configString) {
    try {
        const config = JSON.parse(configString);
        if (!config.theme || !validateThemeConfig(config.theme)) {
            throw new Error('Invalid theme configuration');
        }
        return config.theme;
    } catch (error) {
        console.error('Failed to import theme configuration:', error);
        return null;
    }
}
function generateThemeCSS(theme) {
    const { colorMode, accentColor, accessibilityPrefs } = theme;
    let css = ':root {\n';
    css += `  --accent: ${accentColor};\n`;
    css += `  --accent-rgb: ${hexToRgb(accentColor)};\n`;
    if (accessibilityPrefs.highContrast) {
        css += '  --border-width: 2px;\n';
        css += '  --focus-ring-width: 3px;\n';
    }
    if (accessibilityPrefs.reducedMotion) {
        css += '  --transition-duration: 0ms;\n';
        css += '  --animation-duration: 0ms;\n';
    }
    css += '}\n';
    return css;
}
/**
 * Converts hex color to RGB values
 */ function hexToRgb(hex) {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    if (!result) return '0, 0, 0';
    const r = parseInt(result[1], 16);
    const g = parseInt(result[2], 16);
    const b = parseInt(result[3], 16);
    return `${r}, ${g}, ${b}`;
}
function getContrastRatio(color1, color2) {
    const getLuminance = (hex)=>{
        const rgb = hexToRgb(hex).split(', ').map(Number);
        const [r, g, b] = rgb.map((c)=>{
            c = c / 255;
            return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
        });
        return 0.2126 * r + 0.7152 * g + 0.0722 * b;
    };
    const lum1 = getLuminance(color1);
    const lum2 = getLuminance(color2);
    const brightest = Math.max(lum1, lum2);
    const darkest = Math.min(lum1, lum2);
    return (brightest + 0.05) / (darkest + 0.05);
}
function meetsAccessibilityStandards(foreground, background, level = 'AA') {
    const ratio = getContrastRatio(foreground, background);
    return level === 'AA' ? ratio >= 4.5 : ratio >= 7;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQS5QXFxEb2N1bWVudHNcXERFVlxcZWNoby1tYWluXFxmcm9udGVuZFxcc3JjXFx1dGlsc1xcdGhlbWVVdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhlbWUgTWFuYWdlbWVudCBVdGlsaXRpZXNcclxuICogRW5oYW5jZWQgdXRpbGl0aWVzIGZvciB0aGVtZSBtYW5hZ2VtZW50LCBhY2Nlc3NpYmlsaXR5LCBhbmQgdXNlciBwcmVmZXJlbmNlc1xyXG4gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGhlbWVQcmVzZXQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgY29sb3JNb2RlOiAnbGlnaHQnIHwgJ2RhcmsnIHwgJ2F1dG8nO1xyXG4gIHBhbGV0dGU6IHN0cmluZztcclxuICBhY2NlbnRDb2xvcjogc3RyaW5nO1xyXG4gIHByZXZpZXc6IHtcclxuICAgIGJhY2tncm91bmQ6IHN0cmluZztcclxuICAgIGZvcmVncm91bmQ6IHN0cmluZztcclxuICAgIGFjY2VudDogc3RyaW5nO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWNjZXNzaWJpbGl0eVNldHRpbmdzIHtcclxuICByZWR1Y2VkTW90aW9uOiBib29sZWFuO1xyXG4gIGhpZ2hDb250cmFzdDogYm9vbGVhbjtcclxuICBmb3JjZWRDb2xvcnM6IGJvb2xlYW47XHJcbiAgZm9udFNpemU6ICdzbWFsbCcgfCAnbWVkaXVtJyB8ICdsYXJnZScgfCAneGwnO1xyXG4gIGZvY3VzSW5kaWNhdG9yczogJ3N1YnRsZScgfCAncHJvbWluZW50JztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUaGVtZVNjaGVkdWxlQ29uZmlnIHtcclxuICB0eXBlOiAnb2ZmJyB8ICdzdW5zZXQnIHwgJ3RpbWUnIHwgJ2xvY2F0aW9uJztcclxuICBsaWdodFRpbWU/OiBzdHJpbmc7XHJcbiAgZGFya1RpbWU/OiBzdHJpbmc7XHJcbiAgbG9jYXRpb24/OiB7XHJcbiAgICBsYXQ6IG51bWJlcjtcclxuICAgIGxuZzogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gIH07XHJcbiAgZW5hYmxlZDogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByZWRlZmluZWQgdGhlbWUgcHJlc2V0c1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFRIRU1FX1BSRVNFVFM6IFRoZW1lUHJlc2V0W10gPSBbXHJcbiAge1xyXG4gICAgaWQ6ICdhdXRvJyxcclxuICAgIG5hbWU6ICdBdXRvJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnRm9sbG93cyB5b3VyIHN5c3RlbSBwcmVmZXJlbmNlJyxcclxuICAgIGNvbG9yTW9kZTogJ2F1dG8nLFxyXG4gICAgcGFsZXR0ZTogJ21vbm8nLFxyXG4gICAgYWNjZW50Q29sb3I6ICcjMDA3YWZmJyxcclxuICAgIHByZXZpZXc6IHtcclxuICAgICAgYmFja2dyb3VuZDogJ2xpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmOGZhZmMgMCUsICNlMmU4ZjAgMTAwJSknLFxyXG4gICAgICBmb3JlZ3JvdW5kOiAnIzFlMjkzYicsXHJcbiAgICAgIGFjY2VudDogJyMwMDdhZmYnLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnbGlnaHQnLFxyXG4gICAgbmFtZTogJ0xpZ2h0JyxcclxuICAgIGRlc2NyaXB0aW9uOiAnQ2xlYW4gYW5kIGJyaWdodCBpbnRlcmZhY2UnLFxyXG4gICAgY29sb3JNb2RlOiAnbGlnaHQnLFxyXG4gICAgcGFsZXR0ZTogJ21vbm8nLFxyXG4gICAgYWNjZW50Q29sb3I6ICcjMDA3YWZmJyxcclxuICAgIHByZXZpZXc6IHtcclxuICAgICAgYmFja2dyb3VuZDogJyNmZmZmZmYnLFxyXG4gICAgICBmb3JlZ3JvdW5kOiAnIzFlMjkzYicsXHJcbiAgICAgIGFjY2VudDogJyMwMDdhZmYnLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnZGFyaycsXHJcbiAgICBuYW1lOiAnRGFyaycsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0Vhc3kgb24gdGhlIGV5ZXMgaW4gbG93IGxpZ2h0JyxcclxuICAgIGNvbG9yTW9kZTogJ2RhcmsnLFxyXG4gICAgcGFsZXR0ZTogJ2RhcmsnLFxyXG4gICAgYWNjZW50Q29sb3I6ICcjNjBhNWZhJyxcclxuICAgIHByZXZpZXc6IHtcclxuICAgICAgYmFja2dyb3VuZDogJyMwZjE3MmEnLFxyXG4gICAgICBmb3JlZ3JvdW5kOiAnI2Y4ZmFmYycsXHJcbiAgICAgIGFjY2VudDogJyM2MGE1ZmEnLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnYmx1ZScsXHJcbiAgICBuYW1lOiAnT2NlYW4gQmx1ZScsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0NhbG1pbmcgYmx1ZSB0b25lcycsXHJcbiAgICBjb2xvck1vZGU6ICdsaWdodCcsXHJcbiAgICBwYWxldHRlOiAnYmx1ZScsXHJcbiAgICBhY2NlbnRDb2xvcjogJyMzYjgyZjYnLFxyXG4gICAgcHJldmlldzoge1xyXG4gICAgICBiYWNrZ3JvdW5kOiAnbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2RiZWFmZSAwJSwgI2JmZGJmZSAxMDAlKScsXHJcbiAgICAgIGZvcmVncm91bmQ6ICcjMWUzYThhJyxcclxuICAgICAgYWNjZW50OiAnIzNiODJmNicsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdncmVlbicsXHJcbiAgICBuYW1lOiAnTmF0dXJlIEdyZWVuJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnRnJlc2ggYW5kIG5hdHVyYWwnLFxyXG4gICAgY29sb3JNb2RlOiAnbGlnaHQnLFxyXG4gICAgcGFsZXR0ZTogJ2dyZWVuJyxcclxuICAgIGFjY2VudENvbG9yOiAnIzEwYjk4MScsXHJcbiAgICBwcmV2aWV3OiB7XHJcbiAgICAgIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZDFmYWU1IDAlLCAjYTdmM2QwIDEwMCUpJyxcclxuICAgICAgZm9yZWdyb3VuZDogJyMwNjRlM2InLFxyXG4gICAgICBhY2NlbnQ6ICcjMTBiOTgxJyxcclxuICAgIH0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJ3JlZCcsXHJcbiAgICBuYW1lOiAnTm90aGluZyBSZWQnLFxyXG4gICAgZGVzY3JpcHRpb246ICdCb2xkIE5vdGhpbmcgUGhvbmUgc3R5bGUnLFxyXG4gICAgY29sb3JNb2RlOiAnbGlnaHQnLFxyXG4gICAgcGFsZXR0ZTogJ3JlZCcsXHJcbiAgICBhY2NlbnRDb2xvcjogJyNlZjQ0NDQnLFxyXG4gICAgcHJldmlldzoge1xyXG4gICAgICBiYWNrZ3JvdW5kOiAnbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZlZjJmMiAwJSwgI2ZlY2FjYSAxMDAlKScsXHJcbiAgICAgIGZvcmVncm91bmQ6ICcjN2YxZDFkJyxcclxuICAgICAgYWNjZW50OiAnI2VmNDQ0NCcsXHJcbiAgICB9LFxyXG4gIH0sXHJcbl07XHJcblxyXG4vKipcclxuICogQWNjZXNzaWJpbGl0eSBwcmVzZXRzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQUNDRVNTSUJJTElUWV9QUkVTRVRTOiBSZWNvcmQ8c3RyaW5nLCBBY2Nlc3NpYmlsaXR5U2V0dGluZ3M+ID0ge1xyXG4gIGRlZmF1bHQ6IHtcclxuICAgIHJlZHVjZWRNb3Rpb246IGZhbHNlLFxyXG4gICAgaGlnaENvbnRyYXN0OiBmYWxzZSxcclxuICAgIGZvcmNlZENvbG9yczogZmFsc2UsXHJcbiAgICBmb250U2l6ZTogJ21lZGl1bScsXHJcbiAgICBmb2N1c0luZGljYXRvcnM6ICdzdWJ0bGUnLFxyXG4gIH0sXHJcbiAgYWNjZXNzaWJsZToge1xyXG4gICAgcmVkdWNlZE1vdGlvbjogdHJ1ZSxcclxuICAgIGhpZ2hDb250cmFzdDogdHJ1ZSxcclxuICAgIGZvcmNlZENvbG9yczogZmFsc2UsXHJcbiAgICBmb250U2l6ZTogJ2xhcmdlJyxcclxuICAgIGZvY3VzSW5kaWNhdG9yczogJ3Byb21pbmVudCcsXHJcbiAgfSxcclxuICBsb3dWaXNpb246IHtcclxuICAgIHJlZHVjZWRNb3Rpb246IHRydWUsXHJcbiAgICBoaWdoQ29udHJhc3Q6IHRydWUsXHJcbiAgICBmb3JjZWRDb2xvcnM6IHRydWUsXHJcbiAgICBmb250U2l6ZTogJ3hsJyxcclxuICAgIGZvY3VzSW5kaWNhdG9yczogJ3Byb21pbmVudCcsXHJcbiAgfSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlY3RzIHVzZXIncyBzeXN0ZW0gcHJlZmVyZW5jZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RTeXN0ZW1QcmVmZXJlbmNlcygpOiB7XHJcbiAgY29sb3JTY2hlbWU6ICdsaWdodCcgfCAnZGFyayc7XHJcbiAgcmVkdWNlZE1vdGlvbjogYm9vbGVhbjtcclxuICBoaWdoQ29udHJhc3Q6IGJvb2xlYW47XHJcbiAgZm9yY2VkQ29sb3JzOiBib29sZWFuO1xyXG59IHtcclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvbG9yU2NoZW1lOiAnbGlnaHQnLFxyXG4gICAgICByZWR1Y2VkTW90aW9uOiBmYWxzZSxcclxuICAgICAgaGlnaENvbnRyYXN0OiBmYWxzZSxcclxuICAgICAgZm9yY2VkQ29sb3JzOiBmYWxzZSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY29sb3JTY2hlbWU6IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykubWF0Y2hlc1xyXG4gICAgICA/ICdkYXJrJ1xyXG4gICAgICA6ICdsaWdodCcsXHJcbiAgICByZWR1Y2VkTW90aW9uOiB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSknKVxyXG4gICAgICAubWF0Y2hlcyxcclxuICAgIGhpZ2hDb250cmFzdDogd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbnRyYXN0OiBoaWdoKScpLm1hdGNoZXMsXHJcbiAgICBmb3JjZWRDb2xvcnM6IHdpbmRvdy5tYXRjaE1lZGlhKCcoZm9yY2VkLWNvbG9yczogYWN0aXZlKScpLm1hdGNoZXMsXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgc3VucmlzZSBhbmQgc3Vuc2V0IHRpbWVzIGZvciBhIGxvY2F0aW9uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3VucmlzZVN1bnNldChcclxuICBsYXQ6IG51bWJlcixcclxuICBsbmc6IG51bWJlcixcclxuICBkYXRlPzogRGF0ZVxyXG4pOiBQcm9taXNlPHsgc3VucmlzZTogRGF0ZTsgc3Vuc2V0OiBEYXRlIH0gfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHRhcmdldERhdGUgPSBkYXRlIHx8IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBkYXRlU3RyID0gdGFyZ2V0RGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgYGh0dHBzOi8vYXBpLnN1bnJpc2Utc3Vuc2V0Lm9yZy9qc29uP2xhdD0ke2xhdH0mbG5nPSR7bG5nfSZkYXRlPSR7ZGF0ZVN0cn0mZm9ybWF0dGVkPTBgXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHN1bnJpc2Uvc3Vuc2V0IGRhdGEnKTtcclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIGlmIChkYXRhLnN0YXR1cyAhPT0gJ09LJylcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN1bnJpc2Uvc3Vuc2V0IHJlc3BvbnNlJyk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VucmlzZTogbmV3IERhdGUoZGF0YS5yZXN1bHRzLnN1bnJpc2UpLFxyXG4gICAgICBzdW5zZXQ6IG5ldyBEYXRlKGRhdGEucmVzdWx0cy5zdW5zZXQpLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZmV0Y2ggc3VucmlzZS9zdW5zZXQgdGltZXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0cyB1c2VyJ3MgY3VycmVudCBsb2NhdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRMb2NhdGlvbigpOiBQcm9taXNlPHtcclxuICBsYXQ6IG51bWJlcjtcclxuICBsbmc6IG51bWJlcjtcclxuICBuYW1lPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGlmICghbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XHJcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0dlb2xvY2F0aW9uIGlzIG5vdCBzdXBwb3J0ZWQnKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxyXG4gICAgICBhc3luYyAocG9zaXRpb24pID0+IHtcclxuICAgICAgICBjb25zdCB7IGxhdGl0dWRlOiBsYXQsIGxvbmdpdHVkZTogbG5nIH0gPSBwb3NpdGlvbi5jb29yZHM7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBUcnkgdG8gZ2V0IGxvY2F0aW9uIG5hbWUgdXNpbmcgcmV2ZXJzZSBnZW9jb2RpbmdcclxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgICAgIGBodHRwczovL2FwaS5iaWdkYXRhY2xvdWQubmV0L2RhdGEvcmV2ZXJzZS1nZW9jb2RlLWNsaWVudD9sYXRpdHVkZT0ke2xhdH0mbG9uZ2l0dWRlPSR7bG5nfSZsb2NhbGl0eUxhbmd1YWdlPWVuYFxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9XHJcbiAgICAgICAgICAgICAgZGF0YS5jaXR5IHx8XHJcbiAgICAgICAgICAgICAgZGF0YS5sb2NhbGl0eSB8fFxyXG4gICAgICAgICAgICAgIGRhdGEuY291bnRyeU5hbWUgfHxcclxuICAgICAgICAgICAgICAnVW5rbm93biBMb2NhdGlvbic7XHJcbiAgICAgICAgICAgIHJlc29sdmUoeyBsYXQsIGxuZywgbmFtZSB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoeyBsYXQsIGxuZyB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgcmVzb2x2ZSh7IGxhdCwgbG5nIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogZmFsc2UsXHJcbiAgICAgICAgdGltZW91dDogMTAwMDAsXHJcbiAgICAgICAgbWF4aW11bUFnZTogMzAwMDAwLCAvLyA1IG1pbnV0ZXNcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgaWYgaXQgc2hvdWxkIGJlIGRhcmsgbW9kZSBiYXNlZCBvbiBzY2hlZHVsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFVzZURhcmtNb2RlQnlTY2hlZHVsZShcclxuICBzY2hlZHVsZTogVGhlbWVTY2hlZHVsZUNvbmZpZyxcclxuICBjdXJyZW50VGltZTogRGF0ZSA9IG5ldyBEYXRlKClcclxuKTogYm9vbGVhbiB7XHJcbiAgaWYgKCFzY2hlZHVsZS5lbmFibGVkIHx8IHNjaGVkdWxlLnR5cGUgPT09ICdvZmYnKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdCBob3VycyA9IGN1cnJlbnRUaW1lLmdldEhvdXJzKCk7XHJcbiAgY29uc3QgbWludXRlcyA9IGN1cnJlbnRUaW1lLmdldE1pbnV0ZXMoKTtcclxuICBjb25zdCBjdXJyZW50TWludXRlcyA9IGhvdXJzICogNjAgKyBtaW51dGVzO1xyXG5cclxuICBpZiAoc2NoZWR1bGUudHlwZSA9PT0gJ3RpbWUnICYmIHNjaGVkdWxlLmxpZ2h0VGltZSAmJiBzY2hlZHVsZS5kYXJrVGltZSkge1xyXG4gICAgY29uc3QgW2xpZ2h0SG91ciwgbGlnaHRNaW5dID0gc2NoZWR1bGUubGlnaHRUaW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XHJcbiAgICBjb25zdCBbZGFya0hvdXIsIGRhcmtNaW5dID0gc2NoZWR1bGUuZGFya1RpbWUuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcclxuXHJcbiAgICBjb25zdCBsaWdodE1pbnV0ZXMgPSBsaWdodEhvdXIgKiA2MCArIGxpZ2h0TWluO1xyXG4gICAgY29uc3QgZGFya01pbnV0ZXMgPSBkYXJrSG91ciAqIDYwICsgZGFya01pbjtcclxuXHJcbiAgICBpZiAobGlnaHRNaW51dGVzID4gZGFya01pbnV0ZXMpIHtcclxuICAgICAgLy8gTm9ybWFsIGRheSAobGlnaHQgdGltZSBpcyBhZnRlciBkYXJrIHRpbWUpXHJcbiAgICAgIC8vIERhcmsgcGVyaW9kOiBmcm9tIGRhcmtUaW1lIHRvIGxpZ2h0VGltZVxyXG4gICAgICByZXR1cm4gY3VycmVudE1pbnV0ZXMgPj0gZGFya01pbnV0ZXMgJiYgY3VycmVudE1pbnV0ZXMgPCBsaWdodE1pbnV0ZXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBPdmVybmlnaHQgKGxpZ2h0IHRpbWUgaXMgYmVmb3JlIGRhcmsgdGltZSlcclxuICAgICAgLy8gTGlnaHQgcGVyaW9kOiBmcm9tIGxpZ2h0VGltZSB0byBkYXJrVGltZSAoY3Jvc3NpbmcgbWlkbmlnaHQpXHJcbiAgICAgIC8vIERhcmsgcGVyaW9kOiBmcm9tIGRhcmtUaW1lIHRvIGxpZ2h0VGltZSAobmV4dCBkYXkpXHJcbiAgICAgIHJldHVybiBjdXJyZW50TWludXRlcyA+PSBkYXJrTWludXRlcyB8fCBjdXJyZW50TWludXRlcyA8IGxpZ2h0TWludXRlcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEZvciBzdW5zZXQvbG9jYXRpb24tYmFzZWQgc2NoZWR1bGluZywgdGhpcyB3b3VsZCBuZWVkIHRvIGJlIGltcGxlbWVudGVkXHJcbiAgLy8gd2l0aCBhY3R1YWwgc3VucmlzZS9zdW5zZXQgY2FsY3VsYXRpb25cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlbWUgY29uZmlndXJhdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVGhlbWVDb25maWcoY29uZmlnOiBhbnkpOiBib29sZWFuIHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFjb25maWcgfHwgdHlwZW9mIGNvbmZpZyAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAvLyBDaGVjayByZXF1aXJlZCBwcm9wZXJ0aWVzXHJcbiAgICBpZiAoIVsnbGlnaHQnLCAnZGFyaycsICdhdXRvJ10uaW5jbHVkZXMoY29uZmlnLmNvbG9yTW9kZSkpIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh0eXBlb2YgY29uZmlnLmFjY2VudENvbG9yICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKHR5cGVvZiBjb25maWcucGFsZXR0ZSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBoZXggY29sb3JcclxuICAgIGlmICghL14jWzAtOUEtRl17Nn0kL2kudGVzdChjb25maWcuYWNjZW50Q29sb3IpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHBvcnRzIHRoZW1lIGNvbmZpZ3VyYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHBvcnRUaGVtZUNvbmZpZyh0aGVtZTogYW55KTogc3RyaW5nIHtcclxuICBjb25zdCBjb25maWcgPSB7XHJcbiAgICB2ZXJzaW9uOiAnMS4wJyxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgdGhlbWU6IHtcclxuICAgICAgY29sb3JNb2RlOiB0aGVtZS5jb2xvck1vZGUsXHJcbiAgICAgIHBhbGV0dGU6IHRoZW1lLmNvbG9yUGFsZXR0ZSxcclxuICAgICAgYWNjZW50Q29sb3I6IHRoZW1lLmFjY2VudENvbG9yLFxyXG4gICAgICBhY2Nlc3NpYmlsaXR5UHJlZnM6IHRoZW1lLmFjY2Vzc2liaWxpdHlQcmVmcyxcclxuICAgICAgdGhlbWVTY2hlZHVsZTogdGhlbWUudGhlbWVTY2hlZHVsZSxcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBvcnRzIHRoZW1lIGNvbmZpZ3VyYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbXBvcnRUaGVtZUNvbmZpZyhjb25maWdTdHJpbmc6IHN0cmluZyk6IGFueSB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKGNvbmZpZ1N0cmluZyk7XHJcblxyXG4gICAgaWYgKCFjb25maWcudGhlbWUgfHwgIXZhbGlkYXRlVGhlbWVDb25maWcoY29uZmlnLnRoZW1lKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGhlbWUgY29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb25maWcudGhlbWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbXBvcnQgdGhlbWUgY29uZmlndXJhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBhIHRoZW1lXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUaGVtZUNTUyh0aGVtZTogYW55KTogc3RyaW5nIHtcclxuICBjb25zdCB7IGNvbG9yTW9kZSwgYWNjZW50Q29sb3IsIGFjY2Vzc2liaWxpdHlQcmVmcyB9ID0gdGhlbWU7XHJcblxyXG4gIGxldCBjc3MgPSAnOnJvb3Qge1xcbic7XHJcbiAgY3NzICs9IGAgIC0tYWNjZW50OiAke2FjY2VudENvbG9yfTtcXG5gO1xyXG4gIGNzcyArPSBgICAtLWFjY2VudC1yZ2I6ICR7aGV4VG9SZ2IoYWNjZW50Q29sb3IpfTtcXG5gO1xyXG5cclxuICBpZiAoYWNjZXNzaWJpbGl0eVByZWZzLmhpZ2hDb250cmFzdCkge1xyXG4gICAgY3NzICs9ICcgIC0tYm9yZGVyLXdpZHRoOiAycHg7XFxuJztcclxuICAgIGNzcyArPSAnICAtLWZvY3VzLXJpbmctd2lkdGg6IDNweDtcXG4nO1xyXG4gIH1cclxuXHJcbiAgaWYgKGFjY2Vzc2liaWxpdHlQcmVmcy5yZWR1Y2VkTW90aW9uKSB7XHJcbiAgICBjc3MgKz0gJyAgLS10cmFuc2l0aW9uLWR1cmF0aW9uOiAwbXM7XFxuJztcclxuICAgIGNzcyArPSAnICAtLWFuaW1hdGlvbi1kdXJhdGlvbjogMG1zO1xcbic7XHJcbiAgfVxyXG5cclxuICBjc3MgKz0gJ31cXG4nO1xyXG5cclxuICByZXR1cm4gY3NzO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydHMgaGV4IGNvbG9yIHRvIFJHQiB2YWx1ZXNcclxuICovXHJcbmZ1bmN0aW9uIGhleFRvUmdiKGhleDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcclxuICBpZiAoIXJlc3VsdCkgcmV0dXJuICcwLCAwLCAwJztcclxuXHJcbiAgY29uc3QgciA9IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpO1xyXG4gIGNvbnN0IGcgPSBwYXJzZUludChyZXN1bHRbMl0sIDE2KTtcclxuICBjb25zdCBiID0gcGFyc2VJbnQocmVzdWx0WzNdLCAxNik7XHJcblxyXG4gIHJldHVybiBgJHtyfSwgJHtnfSwgJHtifWA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGNvbG9yIGNvbnRyYXN0IHJhdGlvXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udHJhc3RSYXRpbyhjb2xvcjE6IHN0cmluZywgY29sb3IyOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gIGNvbnN0IGdldEx1bWluYW5jZSA9IChoZXg6IHN0cmluZyk6IG51bWJlciA9PiB7XHJcbiAgICBjb25zdCByZ2IgPSBoZXhUb1JnYihoZXgpLnNwbGl0KCcsICcpLm1hcChOdW1iZXIpO1xyXG4gICAgY29uc3QgW3IsIGcsIGJdID0gcmdiLm1hcCgoYykgPT4ge1xyXG4gICAgICBjID0gYyAvIDI1NTtcclxuICAgICAgcmV0dXJuIGMgPD0gMC4wMzkyOCA/IGMgLyAxMi45MiA6IE1hdGgucG93KChjICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiAwLjIxMjYgKiByICsgMC43MTUyICogZyArIDAuMDcyMiAqIGI7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbHVtMSA9IGdldEx1bWluYW5jZShjb2xvcjEpO1xyXG4gIGNvbnN0IGx1bTIgPSBnZXRMdW1pbmFuY2UoY29sb3IyKTtcclxuICBjb25zdCBicmlnaHRlc3QgPSBNYXRoLm1heChsdW0xLCBsdW0yKTtcclxuICBjb25zdCBkYXJrZXN0ID0gTWF0aC5taW4obHVtMSwgbHVtMik7XHJcblxyXG4gIHJldHVybiAoYnJpZ2h0ZXN0ICsgMC4wNSkgLyAoZGFya2VzdCArIDAuMDUpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGNvbG9yIGNvbWJpbmF0aW9uIG1lZXRzIFdDQUcgYWNjZXNzaWJpbGl0eSBzdGFuZGFyZHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBtZWV0c0FjY2Vzc2liaWxpdHlTdGFuZGFyZHMoXHJcbiAgZm9yZWdyb3VuZDogc3RyaW5nLFxyXG4gIGJhY2tncm91bmQ6IHN0cmluZyxcclxuICBsZXZlbDogJ0FBJyB8ICdBQUEnID0gJ0FBJ1xyXG4pOiBib29sZWFuIHtcclxuICBjb25zdCByYXRpbyA9IGdldENvbnRyYXN0UmF0aW8oZm9yZWdyb3VuZCwgYmFja2dyb3VuZCk7XHJcbiAgcmV0dXJuIGxldmVsID09PSAnQUEnID8gcmF0aW8gPj0gNC41IDogcmF0aW8gPj0gNztcclxufVxyXG4iXSwibmFtZXMiOlsiQUNDRVNTSUJJTElUWV9QUkVTRVRTIiwiVEhFTUVfUFJFU0VUUyIsImRldGVjdFN5c3RlbVByZWZlcmVuY2VzIiwiZXhwb3J0VGhlbWVDb25maWciLCJnZW5lcmF0ZVRoZW1lQ1NTIiwiZ2V0Q29udHJhc3RSYXRpbyIsImdldEN1cnJlbnRMb2NhdGlvbiIsImdldFN1bnJpc2VTdW5zZXQiLCJpbXBvcnRUaGVtZUNvbmZpZyIsIm1lZXRzQWNjZXNzaWJpbGl0eVN0YW5kYXJkcyIsInNob3VsZFVzZURhcmtNb2RlQnlTY2hlZHVsZSIsInZhbGlkYXRlVGhlbWVDb25maWciLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImNvbG9yTW9kZSIsInBhbGV0dGUiLCJhY2NlbnRDb2xvciIsInByZXZpZXciLCJiYWNrZ3JvdW5kIiwiZm9yZWdyb3VuZCIsImFjY2VudCIsImRlZmF1bHQiLCJyZWR1Y2VkTW90aW9uIiwiaGlnaENvbnRyYXN0IiwiZm9yY2VkQ29sb3JzIiwiZm9udFNpemUiLCJmb2N1c0luZGljYXRvcnMiLCJhY2Nlc3NpYmxlIiwibG93VmlzaW9uIiwid2luZG93IiwiY29sb3JTY2hlbWUiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImxhdCIsImxuZyIsImRhdGUiLCJ0YXJnZXREYXRlIiwiRGF0ZSIsImRhdGVTdHIiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJkYXRhIiwianNvbiIsInN0YXR1cyIsInN1bnJpc2UiLCJyZXN1bHRzIiwic3Vuc2V0IiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJwb3NpdGlvbiIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiY29vcmRzIiwiY2l0eSIsImxvY2FsaXR5IiwiY291bnRyeU5hbWUiLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJ0aW1lb3V0IiwibWF4aW11bUFnZSIsInNjaGVkdWxlIiwiY3VycmVudFRpbWUiLCJlbmFibGVkIiwidHlwZSIsImhvdXJzIiwiZ2V0SG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsImN1cnJlbnRNaW51dGVzIiwibGlnaHRUaW1lIiwiZGFya1RpbWUiLCJsaWdodEhvdXIiLCJsaWdodE1pbiIsIm1hcCIsIk51bWJlciIsImRhcmtIb3VyIiwiZGFya01pbiIsImxpZ2h0TWludXRlcyIsImRhcmtNaW51dGVzIiwiY29uZmlnIiwiaW5jbHVkZXMiLCJ0ZXN0IiwidGhlbWUiLCJ2ZXJzaW9uIiwidGltZXN0YW1wIiwiY29sb3JQYWxldHRlIiwiYWNjZXNzaWJpbGl0eVByZWZzIiwidGhlbWVTY2hlZHVsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb25maWdTdHJpbmciLCJwYXJzZSIsImNzcyIsImhleFRvUmdiIiwiaGV4IiwicmVzdWx0IiwiZXhlYyIsInIiLCJwYXJzZUludCIsImciLCJiIiwiY29sb3IxIiwiY29sb3IyIiwiZ2V0THVtaW5hbmNlIiwicmdiIiwiYyIsIk1hdGgiLCJwb3ciLCJsdW0xIiwibHVtMiIsImJyaWdodGVzdCIsIm1heCIsImRhcmtlc3QiLCJtaW4iLCJsZXZlbCIsInJhdGlvIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7Ozs7Ozs7Ozs7O1FBMkhZQTtlQUFBQTs7UUFwRkFDO2VBQUFBOztRQStHR0M7ZUFBQUE7O1FBNktBQztlQUFBQTs7UUFxQ0FDO2VBQUFBOztRQXVDQUM7ZUFBQUE7O1FBM0xBQztlQUFBQTs7UUFqQ01DO2VBQUFBOztRQW1LTkM7ZUFBQUE7O1FBOEVBQztlQUFBQTs7UUE3SkFDO2VBQUFBOztRQXVDQUM7ZUFBQUE7OztBQXZRVCxNQUFNVixnQkFBK0I7SUFDMUM7UUFDRVcsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLGFBQWE7UUFDYkMsU0FBUztZQUNQQyxZQUFZO1lBQ1pDLFlBQVk7WUFDWkMsUUFBUTtRQUNWO0lBQ0Y7SUFDQTtRQUNFVCxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxXQUFXO1FBQ1hDLFNBQVM7UUFDVEMsYUFBYTtRQUNiQyxTQUFTO1lBQ1BDLFlBQVk7WUFDWkMsWUFBWTtZQUNaQyxRQUFRO1FBQ1Y7SUFDRjtJQUNBO1FBQ0VULElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFdBQVc7UUFDWEMsU0FBUztRQUNUQyxhQUFhO1FBQ2JDLFNBQVM7WUFDUEMsWUFBWTtZQUNaQyxZQUFZO1lBQ1pDLFFBQVE7UUFDVjtJQUNGO0lBQ0E7UUFDRVQsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLGFBQWE7UUFDYkMsU0FBUztZQUNQQyxZQUFZ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