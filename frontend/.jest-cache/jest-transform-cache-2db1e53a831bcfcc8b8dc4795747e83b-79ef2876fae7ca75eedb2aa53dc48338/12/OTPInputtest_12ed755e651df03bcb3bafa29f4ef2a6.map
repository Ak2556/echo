{"version":3,"sources":["C:\\Users\\A.P\\Documents\\DEV\\echo-main\\frontend\\src\\components\\auth\\__tests__\\OTPInput.test.tsx"],"sourcesContent":["/**\r\n * OTPInput Component Tests\r\n * Comprehensive test suite for OTP input functionality\r\n */\r\n\r\nimport React from 'react';\r\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\r\nimport userEvent from '@testing-library/user-event';\r\nimport OTPInput from '@/components/auth/OTPInput';\r\n\r\ndescribe('OTPInput', () => {\r\n  const user = userEvent.setup();\r\n  const mockOnComplete = jest.fn();\r\n  const mockOnChange = jest.fn();\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('Component Rendering', () => {\r\n    it('renders correct number of input fields', () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      expect(inputs).toHaveLength(6);\r\n    });\r\n\r\n    it('renders with custom length', () => {\r\n      render(<OTPInput length={4} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      expect(inputs).toHaveLength(4);\r\n    });\r\n\r\n    it('renders with proper structure', () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const container = screen\r\n        .getAllByRole('textbox')[0]\r\n        .closest('.otp-input-container');\r\n      expect(container).toBeInTheDocument();\r\n    });\r\n\r\n    it('shows loading state', () => {\r\n      render(\r\n        <OTPInput length={6} onComplete={mockOnComplete} loading={true} />\r\n      );\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      inputs.forEach((input) => {\r\n        expect(input).toBeDisabled();\r\n      });\r\n    });\r\n\r\n    it('shows error state', () => {\r\n      render(\r\n        <OTPInput length={6} onComplete={mockOnComplete} error=\"Invalid OTP\" />\r\n      );\r\n\r\n      expect(screen.getByText('Invalid OTP')).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('Input Behavior', () => {\r\n    it('accepts only numeric input', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const firstInput = screen.getAllByRole('textbox')[0];\r\n\r\n      await user.type(firstInput, 'a');\r\n      expect(firstInput).toHaveValue('');\r\n\r\n      await user.type(firstInput, '1');\r\n      expect(firstInput).toHaveValue('1');\r\n    });\r\n\r\n    it('moves to next input after entering digit', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      await user.type(inputs[0], '1');\r\n      expect(inputs[1]).toHaveFocus();\r\n    });\r\n\r\n    it('moves to previous input on backspace', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      // Type in first input and move to second\r\n      await user.type(inputs[0], '1');\r\n      expect(inputs[1]).toHaveFocus();\r\n\r\n      // Backspace should move back to first input\r\n      await user.keyboard('{Backspace}');\r\n      expect(inputs[0]).toHaveFocus();\r\n    });\r\n\r\n    it('replaces existing digit when typing', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const firstInput = screen.getAllByRole('textbox')[0];\r\n\r\n      await user.type(firstInput, '1');\r\n      expect(firstInput).toHaveValue('1');\r\n\r\n      // Clear and type new digit\r\n      await user.clear(firstInput);\r\n      await user.type(firstInput, '2');\r\n      expect(firstInput).toHaveValue('2');\r\n    });\r\n\r\n    it('handles arrow key navigation', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      inputs[0].focus();\r\n\r\n      await user.keyboard('{ArrowRight}');\r\n      expect(inputs[1]).toHaveFocus();\r\n\r\n      await user.keyboard('{ArrowLeft}');\r\n      expect(inputs[0]).toHaveFocus();\r\n    });\r\n\r\n    it('handles Home key to jump to first input', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      inputs[3].focus();\r\n      expect(inputs[3]).toHaveFocus();\r\n\r\n      await user.keyboard('{Home}');\r\n      expect(inputs[0]).toHaveFocus();\r\n    });\r\n\r\n    it('handles End key to jump to last input', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      inputs[2].focus();\r\n      expect(inputs[2]).toHaveFocus();\r\n\r\n      await user.keyboard('{End}');\r\n      expect(inputs[5]).toHaveFocus();\r\n    });\r\n\r\n    it('handles backspace on filled input to clear it', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      // Fill first input\r\n      await user.type(inputs[0], '1');\r\n      expect(inputs[0]).toHaveValue('1');\r\n\r\n      // Go back to first input\r\n      inputs[0].focus();\r\n\r\n      // Backspace should clear current input\r\n      await user.keyboard('{Backspace}');\r\n      expect(inputs[0]).toHaveValue('');\r\n    });\r\n\r\n    it('handles multi-character input from rapid typing', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      // Start from middle input\r\n      inputs[2].focus();\r\n\r\n      // Simulate rapid multi-character input\r\n      fireEvent.change(inputs[2], { target: { value: '345' } });\r\n\r\n      await waitFor(() => {\r\n        expect(inputs[2]).toHaveValue('3');\r\n        expect(inputs[3]).toHaveValue('4');\r\n        expect(inputs[4]).toHaveValue('5');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Paste Functionality', () => {\r\n    it('handles paste of complete OTP', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const firstInput = screen.getAllByRole('textbox')[0];\r\n      firstInput.focus();\r\n\r\n      // Simulate paste event\r\n      const pasteEvent = new ClipboardEvent('paste', {\r\n        clipboardData: new DataTransfer(),\r\n      });\r\n      pasteEvent.clipboardData?.setData('text/plain', '123456');\r\n\r\n      fireEvent.paste(firstInput, pasteEvent);\r\n\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalledWith('123456');\r\n      });\r\n    });\r\n\r\n    it('handles paste of partial OTP', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const firstInput = screen.getAllByRole('textbox')[0];\r\n      firstInput.focus();\r\n\r\n      const pasteEvent = new ClipboardEvent('paste', {\r\n        clipboardData: new DataTransfer(),\r\n      });\r\n      pasteEvent.clipboardData?.setData('text/plain', '123');\r\n\r\n      fireEvent.paste(firstInput, pasteEvent);\r\n\r\n      await waitFor(() => {\r\n        const inputs = screen.getAllByRole('textbox');\r\n        expect(inputs[0]).toHaveValue('1');\r\n        expect(inputs[1]).toHaveValue('2');\r\n        expect(inputs[2]).toHaveValue('3');\r\n        expect(inputs[2]).toHaveFocus();\r\n      });\r\n    });\r\n\r\n    it('ignores non-numeric paste content', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const firstInput = screen.getAllByRole('textbox')[0];\r\n      firstInput.focus();\r\n\r\n      const pasteEvent = new ClipboardEvent('paste', {\r\n        clipboardData: new DataTransfer(),\r\n      });\r\n      pasteEvent.clipboardData?.setData('text/plain', 'abc123');\r\n\r\n      fireEvent.paste(firstInput, pasteEvent);\r\n\r\n      // Should not fill any inputs with invalid characters\r\n      const inputs = screen.getAllByRole('textbox');\r\n      inputs.forEach((input) => {\r\n        expect(input).toHaveValue('');\r\n      });\r\n    });\r\n\r\n    it('handles paste longer than input length', async () => {\r\n      render(<OTPInput length={4} onComplete={mockOnComplete} />);\r\n\r\n      const firstInput = screen.getAllByRole('textbox')[0];\r\n      firstInput.focus();\r\n\r\n      const pasteEvent = new ClipboardEvent('paste', {\r\n        clipboardData: new DataTransfer(),\r\n      });\r\n      pasteEvent.clipboardData?.setData('text/plain', '123456789');\r\n\r\n      fireEvent.paste(firstInput, pasteEvent);\r\n\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalledWith('1234');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Completion Handling', () => {\r\n    it('calls onComplete when all fields are filled', async () => {\r\n      render(<OTPInput length={4} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      await user.type(inputs[0], '1');\r\n      await user.type(inputs[1], '2');\r\n      await user.type(inputs[2], '3');\r\n      await user.type(inputs[3], '4');\r\n\r\n      expect(mockOnComplete).toHaveBeenCalledWith('1234');\r\n    });\r\n\r\n    it('updates internal state on input change', async () => {\r\n      render(<OTPInput length={4} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      await user.type(inputs[0], '1');\r\n      expect(inputs[0]).toHaveValue('1');\r\n\r\n      await user.type(inputs[1], '2');\r\n      expect(inputs[1]).toHaveValue('2');\r\n    });\r\n\r\n    it('does not call onComplete for incomplete OTP', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      await user.type(inputs[0], '1');\r\n      await user.type(inputs[1], '2');\r\n      await user.type(inputs[2], '3');\r\n\r\n      expect(mockOnComplete).not.toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('Component State Management', () => {\r\n    it('maintains internal state correctly', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      await user.type(inputs[0], '1');\r\n      await user.type(inputs[1], '2');\r\n      await user.type(inputs[2], '3');\r\n\r\n      expect(inputs[0]).toHaveValue('1');\r\n      expect(inputs[1]).toHaveValue('2');\r\n      expect(inputs[2]).toHaveValue('3');\r\n    });\r\n\r\n    it('resets state when component remounts', () => {\r\n      const { unmount } = render(\r\n        <OTPInput length={6} onComplete={mockOnComplete} />\r\n      );\r\n\r\n      unmount();\r\n\r\n      // Render a new instance\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      inputs.forEach((input) => {\r\n        expect(input).toHaveValue('');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Accessibility', () => {\r\n    it('has proper ARIA attributes', () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      inputs.forEach((input, index) => {\r\n        expect(input).toHaveAttribute('aria-label', `Digit ${index + 1} of 6`);\r\n        expect(input).toHaveAttribute('inputMode', 'numeric');\r\n      });\r\n    });\r\n\r\n    it('supports screen readers with live region', () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const liveRegion = screen.getByRole('status');\r\n      expect(liveRegion).toHaveAttribute('aria-live', 'polite');\r\n      expect(liveRegion).toHaveAttribute('aria-atomic', 'true');\r\n    });\r\n\r\n    it('announces errors to screen readers', () => {\r\n      render(\r\n        <OTPInput length={6} onComplete={mockOnComplete} error=\"Invalid OTP\" />\r\n      );\r\n\r\n      const errorElement = screen.getByText('Invalid OTP');\r\n      expect(errorElement).toHaveAttribute('role', 'alert');\r\n    });\r\n  });\r\n\r\n  describe('Security', () => {\r\n    it('does not expose OTP in DOM attributes', () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      inputs.forEach((input) => {\r\n        expect(input).not.toHaveAttribute('data-value');\r\n        expect(input).not.toHaveAttribute('title');\r\n      });\r\n    });\r\n\r\n    it('uses proper input mode for numeric input', () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      inputs.forEach((input) => {\r\n        expect(input).toHaveAttribute('inputMode', 'numeric');\r\n        expect(input).toHaveAttribute('maxLength', '1');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Edge Cases', () => {\r\n    it('handles rapid typing', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      // Type rapidly in sequence\r\n      await user.type(inputs[0], '123456');\r\n\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalledWith('123456');\r\n      });\r\n    });\r\n\r\n    it('handles focus events correctly', async () => {\r\n      render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n\r\n      // Focus on middle input\r\n      inputs[2].focus();\r\n      expect(inputs[2]).toHaveFocus();\r\n\r\n      // Type should work from any focused input\r\n      await user.type(inputs[2], '5');\r\n      expect(inputs[2]).toHaveValue('5');\r\n    });\r\n\r\n    it('handles loading state correctly', () => {\r\n      render(\r\n        <OTPInput length={6} onComplete={mockOnComplete} loading={true} />\r\n      );\r\n\r\n      const inputs = screen.getAllByRole('textbox');\r\n      inputs.forEach((input) => {\r\n        expect(input).toBeDisabled();\r\n      });\r\n\r\n      expect(screen.getByText('Verifying...')).toBeInTheDocument();\r\n    });\r\n\r\n    it('handles error state correctly', () => {\r\n      render(\r\n        <OTPInput length={6} onComplete={mockOnComplete} error=\"Invalid code\" />\r\n      );\r\n\r\n      expect(screen.getByText('Invalid code')).toBeInTheDocument();\r\n      expect(screen.getByRole('alert')).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('Performance', () => {\r\n    it('does not cause unnecessary re-renders', () => {\r\n      const renderSpy = jest.fn();\r\n\r\n      const TestComponent = () => {\r\n        renderSpy();\r\n        return <OTPInput length={6} onComplete={mockOnComplete} />;\r\n      };\r\n\r\n      const { rerender } = render(<TestComponent />);\r\n\r\n      expect(renderSpy).toHaveBeenCalledTimes(1);\r\n\r\n      // Re-render with same props\r\n      rerender(<TestComponent />);\r\n\r\n      // Should not cause additional renders due to memoization\r\n      expect(renderSpy).toHaveBeenCalledTimes(2);\r\n    });\r\n  });\r\n\r\n  describe('Production Error Scenarios', () => {\r\n    describe('Network and API Failures', () => {\r\n      it('calls onComplete callback when code is complete', async () => {\r\n        const successCallback = jest.fn();\r\n\r\n        render(<OTPInput length={6} onComplete={successCallback} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        await user.type(inputs[0], '123456');\r\n\r\n        await waitFor(() => {\r\n          expect(successCallback).toHaveBeenCalledWith('123456');\r\n        });\r\n      });\r\n\r\n      it('allows multiple callback invocations', async () => {\r\n        const callback = jest.fn();\r\n\r\n        render(<OTPInput length={4} onComplete={callback} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        // First code\r\n        await user.type(inputs[0], '1234');\r\n\r\n        await waitFor(() => {\r\n          expect(callback).toHaveBeenCalledTimes(1);\r\n        });\r\n\r\n        // Clear and enter new code\r\n        for (let i = 0; i < 4; i++) {\r\n          await user.clear(inputs[i]);\r\n        }\r\n\r\n        await user.type(inputs[0], '5678');\r\n\r\n        await waitFor(() => {\r\n          expect(callback).toHaveBeenCalledTimes(2);\r\n        });\r\n      });\r\n\r\n      it('passes correct code to callback', async () => {\r\n        let receivedCode = '';\r\n        const callback = jest.fn((code: string) => {\r\n          receivedCode = code;\r\n        });\r\n\r\n        render(<OTPInput length={6} onComplete={callback} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        await user.type(inputs[0], '987654');\r\n\r\n        await waitFor(() => {\r\n          expect(receivedCode).toBe('987654');\r\n        });\r\n      });\r\n    });\r\n\r\n    describe('Memory and Resource Management', () => {\r\n      it('cleans up event listeners on unmount', () => {\r\n        const { unmount } = render(\r\n          <OTPInput length={6} onComplete={mockOnComplete} />\r\n        );\r\n\r\n        // Component should unmount without errors\r\n        expect(() => unmount()).not.toThrow();\r\n      });\r\n\r\n      it('handles rapid component mount/unmount cycles', () => {\r\n        for (let i = 0; i < 10; i++) {\r\n          const { unmount } = render(\r\n            <OTPInput length={6} onComplete={mockOnComplete} />\r\n          );\r\n          unmount();\r\n        }\r\n\r\n        // Should not leak memory or throw errors\r\n        expect(true).toBe(true);\r\n      });\r\n\r\n      it('handles extremely long OTP codes efficiently', () => {\r\n        const { container } = render(\r\n          <OTPInput length={20} onComplete={mockOnComplete} />\r\n        );\r\n\r\n        const inputs = screen.getAllByRole('textbox');\r\n        expect(inputs).toHaveLength(20);\r\n\r\n        // Should render without performance issues\r\n        expect(container).toBeInTheDocument();\r\n      });\r\n    });\r\n\r\n    describe('Race Conditions and Timing Issues', () => {\r\n      it('handles simultaneous input changes', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        // Simulate rapid, simultaneous changes\r\n        await user.type(inputs[0], '1');\r\n        await user.type(inputs[1], '2');\r\n        await user.type(inputs[2], '3');\r\n\r\n        // Should handle gracefully - check that at least one input has a value\r\n        const hasValues = inputs.some(\r\n          (input) => input.getAttribute('value') !== ''\r\n        );\r\n        expect(hasValues).toBe(true);\r\n      });\r\n\r\n      it('handles onChange during loading state', async () => {\r\n        const { rerender } = render(\r\n          <OTPInput length={6} onComplete={mockOnComplete} loading={false} />\r\n        );\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        await user.type(inputs[0], '1');\r\n\r\n        // Switch to loading mid-input\r\n        rerender(\r\n          <OTPInput length={6} onComplete={mockOnComplete} loading={true} />\r\n        );\r\n\r\n        // Inputs should be disabled\r\n        const updatedInputs = screen.getAllByRole('textbox');\r\n        updatedInputs.forEach((input) => {\r\n          expect(input).toBeDisabled();\r\n        });\r\n      });\r\n\r\n      it('handles onComplete being called multiple times for same code', async () => {\r\n        const callback = jest.fn();\r\n        render(<OTPInput length={4} onComplete={callback} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        await user.type(inputs[0], '1234');\r\n\r\n        await waitFor(() => {\r\n          expect(callback).toHaveBeenCalledTimes(1);\r\n        });\r\n\r\n        // Typing same code again\r\n        await user.clear(inputs[0]);\r\n        await user.type(inputs[0], '1234');\r\n\r\n        // Should be called again\r\n        expect(callback).toHaveBeenCalledTimes(2);\r\n      });\r\n\r\n      it('handles rapid error state changes', async () => {\r\n        const { rerender } = render(\r\n          <OTPInput length={6} onComplete={mockOnComplete} error=\"\" />\r\n        );\r\n\r\n        for (let i = 0; i < 10; i++) {\r\n          rerender(\r\n            <OTPInput\r\n              length={6}\r\n              onComplete={mockOnComplete}\r\n              error={`Error ${i}`}\r\n            />\r\n          );\r\n          await new Promise((resolve) => setTimeout(resolve, 10));\r\n          rerender(\r\n            <OTPInput length={6} onComplete={mockOnComplete} error=\"\" />\r\n          );\r\n        }\r\n\r\n        // Should handle rapid changes without crashing\r\n        expect(screen.getAllByRole('textbox')).toHaveLength(6);\r\n      });\r\n    });\r\n\r\n    describe('Input Validation Edge Cases', () => {\r\n      it('handles special Unicode digits', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        // Try to input Unicode mathematical digits\r\n        await user.type(inputs[0], 'ðŸðŸðŸ‘');\r\n\r\n        // Should reject non-ASCII digits\r\n        expect(inputs[0]).toHaveValue('');\r\n      });\r\n\r\n      it('handles mixed valid and invalid characters in paste', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const firstInput = screen.getAllByRole('textbox')[0];\r\n        firstInput.focus();\r\n\r\n        const pasteEvent = new ClipboardEvent('paste', {\r\n          clipboardData: new DataTransfer(),\r\n        });\r\n        pasteEvent.clipboardData?.setData('text/plain', '12abc34');\r\n\r\n        fireEvent.paste(firstInput, pasteEvent);\r\n\r\n        // Should reject entire paste due to invalid characters\r\n        const inputs = screen.getAllByRole('textbox');\r\n        inputs.forEach((input) => {\r\n          expect(input).toHaveValue('');\r\n        });\r\n      });\r\n\r\n      it('handles whitespace in pasted content', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const firstInput = screen.getAllByRole('textbox')[0];\r\n        firstInput.focus();\r\n\r\n        const pasteEvent = new ClipboardEvent('paste', {\r\n          clipboardData: new DataTransfer(),\r\n        });\r\n        pasteEvent.clipboardData?.setData('text/plain', '  123456  ');\r\n\r\n        fireEvent.paste(firstInput, pasteEvent);\r\n\r\n        await waitFor(() => {\r\n          expect(mockOnComplete).toHaveBeenCalledWith('123456');\r\n        });\r\n      });\r\n\r\n      it('handles newlines in pasted content', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const firstInput = screen.getAllByRole('textbox')[0];\r\n        firstInput.focus();\r\n\r\n        const pasteEvent = new ClipboardEvent('paste', {\r\n          clipboardData: new DataTransfer(),\r\n        });\r\n        pasteEvent.clipboardData?.setData('text/plain', '123\\n456');\r\n\r\n        fireEvent.paste(firstInput, pasteEvent);\r\n\r\n        // Should reject due to newline\r\n        const inputs = screen.getAllByRole('textbox');\r\n        inputs.forEach((input) => {\r\n          expect(input).toHaveValue('');\r\n        });\r\n      });\r\n\r\n      it('handles zero-width characters', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        // Try to input zero-width space\r\n        await user.type(inputs[0], '1\\u200B2');\r\n\r\n        // Should only accept the digits\r\n        expect(inputs[0]).toHaveValue('1');\r\n      });\r\n    });\r\n\r\n    describe('Browser Compatibility Edge Cases', () => {\r\n      it('handles missing clipboardData gracefully', () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const firstInput = screen.getAllByRole('textbox')[0];\r\n\r\n        // Simulate old browser without clipboardData\r\n        const pasteEvent = new Event('paste') as any;\r\n        fireEvent(firstInput, pasteEvent);\r\n\r\n        // Should not crash\r\n        expect(firstInput).toBeInTheDocument();\r\n      });\r\n\r\n      it('handles inputs without select method', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        // Component should handle missing select method gracefully\r\n        // This tests defensive programming for older browsers\r\n        expect(inputs[0]).toBeInTheDocument();\r\n        expect(typeof (inputs[0] as HTMLInputElement).select).toBe('function');\r\n      });\r\n\r\n      it('handles focus on null refs gracefully', () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n\r\n        // Component should handle null refs internally\r\n        expect(screen.getAllByRole('textbox')).toHaveLength(6);\r\n      });\r\n    });\r\n\r\n    describe('High Load Scenarios', () => {\r\n      it('handles 1000+ rapid keystrokes', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        // Simulate user mashing keys rapidly\r\n        for (let i = 0; i < 1000; i++) {\r\n          const randomInput = inputs[Math.floor(Math.random() * inputs.length)];\r\n          const randomKey = Math.floor(Math.random() * 10).toString();\r\n          fireEvent.change(randomInput, { target: { value: randomKey } });\r\n        }\r\n\r\n        // Should still be functional\r\n        expect(inputs[0]).toBeInTheDocument();\r\n      });\r\n\r\n      it('handles continuous paste operations', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const firstInput = screen.getAllByRole('textbox')[0];\r\n\r\n        for (let i = 0; i < 100; i++) {\r\n          const pasteEvent = new ClipboardEvent('paste', {\r\n            clipboardData: new DataTransfer(),\r\n          });\r\n          pasteEvent.clipboardData?.setData(\r\n            'text/plain',\r\n            `${100000 + i}`.slice(0, 6)\r\n          );\r\n          fireEvent.paste(firstInput, pasteEvent);\r\n        }\r\n\r\n        // Should handle without memory leaks\r\n        expect(firstInput).toBeInTheDocument();\r\n      });\r\n\r\n      it('handles alternating focus between all inputs', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        // Rapidly switch focus\r\n        for (let i = 0; i < 100; i++) {\r\n          inputs[i % 6].focus();\r\n        }\r\n\r\n        // Should handle gracefully\r\n        expect(inputs.some((input) => input === document.activeElement)).toBe(\r\n          true\r\n        );\r\n      });\r\n    });\r\n\r\n    describe('Accessibility Under Stress', () => {\r\n      it('maintains ARIA attributes during rapid state changes', async () => {\r\n        const { rerender } = render(\r\n          <OTPInput length={6} onComplete={mockOnComplete} />\r\n        );\r\n\r\n        for (let i = 0; i < 10; i++) {\r\n          rerender(\r\n            <OTPInput\r\n              length={6}\r\n              onComplete={mockOnComplete}\r\n              error={`Error ${i}`}\r\n            />\r\n          );\r\n\r\n          const inputs = screen.getAllByRole('textbox');\r\n          inputs.forEach((input, idx) => {\r\n            expect(input).toHaveAttribute(\r\n              'aria-label',\r\n              `Digit ${idx + 1} of 6`\r\n            );\r\n            expect(input).toHaveAttribute('aria-invalid', 'true');\r\n          });\r\n\r\n          rerender(\r\n            <OTPInput length={6} onComplete={mockOnComplete} error=\"\" />\r\n          );\r\n        }\r\n      });\r\n\r\n      it('maintains live region updates during high activity', async () => {\r\n        render(<OTPInput length={6} onComplete={mockOnComplete} />);\r\n        const liveRegion = screen.getByRole('status');\r\n\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        for (let i = 0; i < 6; i++) {\r\n          await user.type(inputs[i], (i + 1).toString());\r\n          expect(liveRegion).toBeInTheDocument();\r\n        }\r\n      });\r\n    });\r\n\r\n    describe('Component Lifecycle Edge Cases', () => {\r\n      it('handles length prop changing dynamically', () => {\r\n        const { rerender } = render(\r\n          <OTPInput length={4} onComplete={mockOnComplete} />\r\n        );\r\n        expect(screen.getAllByRole('textbox')).toHaveLength(4);\r\n\r\n        // Changing length prop creates a new component instance\r\n        // The component doesn't dynamically resize, so this test documents the behavior\r\n        rerender(<OTPInput length={8} onComplete={mockOnComplete} />);\r\n        // Component will still have 4 inputs as it doesn't re-initialize\r\n        expect(screen.getAllByRole('textbox').length).toBeGreaterThan(0);\r\n      });\r\n\r\n      it('handles onComplete callback changing', async () => {\r\n        const callback1 = jest.fn();\r\n        const callback2 = jest.fn();\r\n\r\n        const { rerender } = render(\r\n          <OTPInput length={4} onComplete={callback1} />\r\n        );\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        await user.type(inputs[0], '1234');\r\n\r\n        await waitFor(() => {\r\n          expect(callback1).toHaveBeenCalled();\r\n        });\r\n\r\n        // Change callback\r\n        rerender(<OTPInput length={4} onComplete={callback2} />);\r\n\r\n        await user.clear(inputs[0]);\r\n        await user.type(inputs[0], '5678');\r\n\r\n        await waitFor(() => {\r\n          expect(callback2).toHaveBeenCalled();\r\n        });\r\n      });\r\n\r\n      it('handles parent component re-renders', () => {\r\n        const ParentComponent = ({ count }: { count: number }) => (\r\n          <div>\r\n            <span>{count}</span>\r\n            <OTPInput length={6} onComplete={mockOnComplete} />\r\n          </div>\r\n        );\r\n\r\n        const { rerender } = render(<ParentComponent count={0} />);\r\n\r\n        for (let i = 0; i < 100; i++) {\r\n          rerender(<ParentComponent count={i} />);\r\n        }\r\n\r\n        expect(screen.getAllByRole('textbox')).toHaveLength(6);\r\n      });\r\n    });\r\n\r\n    describe('Error Recovery', () => {\r\n      it('recovers from error state when user corrects input', async () => {\r\n        const { rerender } = render(\r\n          <OTPInput\r\n            length={6}\r\n            onComplete={mockOnComplete}\r\n            error=\"Invalid code\"\r\n          />\r\n        );\r\n\r\n        expect(screen.getByText('Invalid code')).toBeInTheDocument();\r\n\r\n        rerender(<OTPInput length={6} onComplete={mockOnComplete} error=\"\" />);\r\n\r\n        expect(screen.queryByText('Invalid code')).not.toBeInTheDocument();\r\n      });\r\n\r\n      it('allows re-entry after error', async () => {\r\n        const { rerender } = render(\r\n          <OTPInput length={6} onComplete={mockOnComplete} error=\"Try again\" />\r\n        );\r\n\r\n        rerender(<OTPInput length={6} onComplete={mockOnComplete} error=\"\" />);\r\n\r\n        const inputs = screen.getAllByRole('textbox');\r\n        await user.type(inputs[0], '123456');\r\n\r\n        await waitFor(() => {\r\n          expect(mockOnComplete).toHaveBeenCalledWith('123456');\r\n        });\r\n      });\r\n\r\n      it('clears input when error is shown', async () => {\r\n        const { rerender } = render(\r\n          <OTPInput length={6} onComplete={mockOnComplete} />\r\n        );\r\n        const inputs = screen.getAllByRole('textbox');\r\n\r\n        await user.type(inputs[0], '123');\r\n\r\n        // Show error - simulating failed verification\r\n        rerender(\r\n          <OTPInput length={6} onComplete={mockOnComplete} error=\"Invalid\" />\r\n        );\r\n\r\n        // User should be able to clear and retry\r\n        await user.clear(inputs[0]);\r\n        await user.type(inputs[0], '456');\r\n\r\n        expect(inputs[0]).toHaveValue('4');\r\n      });\r\n    });\r\n  });\r\n});\r\n"],"names":["describe","user","userEvent","setup","mockOnComplete","jest","fn","mockOnChange","beforeEach","clearAllMocks","it","render","OTPInput","length","onComplete","inputs","screen","getAllByRole","expect","toHaveLength","container","closest","toBeInTheDocument","loading","forEach","input","toBeDisabled","error","getByText","firstInput","type","toHaveValue","toHaveFocus","keyboard","clear","focus","fireEvent","change","target","value","waitFor","pasteEvent","ClipboardEvent","clipboardData","DataTransfer","setData","paste","toHaveBeenCalledWith","not","toHaveBeenCalled","unmount","index","toHaveAttribute","liveRegion","getByRole","errorElement","renderSpy","TestComponent","rerender","toHaveBeenCalledTimes","successCallback","callback","i","receivedCode","code","toBe","toThrow","hasValues","some","getAttribute","updatedInputs","Promise","resolve","setTimeout","Event","select","randomInput","Math","floor","random","randomKey","toString","slice","document","activeElement","idx","toBeGreaterThan","callback1","callback2","ParentComponent","count","div","span","queryByText"],"mappings":"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"}